ĞÏà¡±á>şÿ	şÿÿÿaïÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿıÿÿÿşÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿRoot EntryÿÿÿÿÿÿÿÿÿÿÿÿşÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿRoot Entryÿÿÿÿÿÿÿÿpª|YªrÏƒRASHt’5ÈBÅ@„Contents	ÿÿÿÿğ9DPage 1ÿÿÿÿÿÿÿÿÿÿÿÿäšSymbol 56ÿÿÿÿÿÿÿÿÿÿÿÿ
ÿÿÿÿÿÿÿÿıÿÿÿ	
şÿÿÿ" !#3$%&'()*+,-./0124E56789:;<=>?@ABCDFàG\IJKLMNOPşÿÿÿRSTUVWXYZ[şÿÿÿ]^_`Èıÿÿÿcdefghijklmnopqrstuvwxyz{|}~Symbol 55ÿÿÿÿ„Symbol 54ÿÿÿÿÿÿÿÿÿÿÿÿıWSymbol 53ÿÿÿÿ÷JSymbol 51ÿÿÿÿÿÿÿÿÿÿÿÿïÓSymbol 508ÿÿÿÿçÓSymbol 1ÿÿÿÿÿÿÿÿÿÿÿÿÎASymbol 2ÿÿÿÿá~Symbol 3ÿÿÿÿÿÿÿÿÿÿÿÿÚƒSymbol 4ÿÿÿÿÔ|Symbol 5ÿÿÿÿÿÿÿÿÿÿÿÿ¶_Symbol 6
ÿÿÿÿ«ä9Symbol 7ÿÿÿÿÿÿÿÿÿÿÿÿƒ¾OSymbol 8ÿÿÿÿbASymbol 9ÿÿÿÿÿÿÿÿÿÿÿÿ§ƒSymbol 10ÿÿÿÿ¢Symbol 11ÿÿÿÿÿÿÿÿÿÿÿÿœRSymbol 12ÿÿÿÿ•¶Symbol 13ÿÿÿÿÿÿÿÿÿÿÿÿPSymbol 14&ÿÿÿÿ‰TSymbol 15ÿÿÿÿÿÿÿÿÿÿÿÿQ@Symbol 16ÿÿÿÿH_Symbol 17ÿÿÿÿÿÿÿÿÿÿÿÿƒTSymbol 18ÿÿÿÿ}TSymbol 19ÿÿÿÿÿÿÿÿÿÿÿÿrŒSymbol 20ÿÿÿÿlTSymbol 21ÿÿÿÿÿÿÿÿÿÿÿÿaºSymbol 22"ÿÿÿÿ[WSymbol 23ÿÿÿÿÿÿÿÿÿÿÿÿP¶Symbol 24!ÿÿÿÿE¸Symbol 25ÿÿÿÿÿÿÿÿÿÿÿÿ:ºSymbol 26 $ÿÿÿÿ/ºSymbol 27ÿÿÿÿÿÿÿÿÿÿÿÿ$ºSymbol 28#%ÿÿÿÿËSymbol 29ÿÿÿÿÿÿÿÿÿÿÿÿ…Symbol 30.ÿÿÿÿôSymbol 31ÿÿÿÿÿÿÿÿÿÿÿÿç@Symbol 32')ÿÿÿÿÚ
Symbol 33ÿÿÿÿÿÿÿÿÿÿÿÿËšSymbol 34(,ÿÿÿÿ¶Symbol 35ÿÿÿÿÿÿÿÿÿÿÿÿ±)Symbol 36+-ÿÿÿÿ¬%Symbol 37ÿÿÿÿÿÿÿÿÿÿÿÿŸ)Symbol 38*6ÿÿÿÿ’&Symbol 39ÿÿÿÿÿÿÿÿÿÿÿÿ‹ŸSymbol 40/1ÿÿÿÿ…TSymbol 41ÿÿÿÿÿÿÿÿÿÿÿÿx$Symbol 4204ÿÿÿÿs?Symbol 43ÿÿÿÿÿÿÿÿÿÿÿÿixSymbol 4435ÿÿÿÿ^¨Symbol 45ÿÿÿÿÿÿÿÿÿÿÿÿXBSymbol 462ÿÿÿÿEŠSymbol 47ÿÿÿÿÿÿÿÿÿÿÿÿ>Symbol 4879ÿÿÿÿ¹Symbol 49ÿÿÿÿÿÿÿÿÿÿÿÿ°ÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿşÿÿÿ	
 !"#$%&'()*+,-./0123456789:;<=şÿÿÿ?@ABCDşÿÿÿFGHIJKLMNOPQRSTUVWşÿÿÿYZ[\]şÿÿÿ_`abcdefghşÿÿÿjklmnopqrşÿÿÿtuvwşÿÿÿyz{|}~ÿÿÿÿCPicText	/úÿÿdÿÿÿ£8ArialÌÿ"(EnvironmentManagerÿÿÿ?ÿÿ‰k1function getCurrentEnv()
{
	return _currEnv;
}
getCurrEnv()ÿÿÿÿOÿÿÿÿÿÿÿ?ÿÿ;2ÿöfunction traceLoggingSettings()
{
	trace("......Logging Settings: ");
		
	trace("   _eMenuControls:     " + _eMenuControls + ", is enabled: " + isAreaEnabled(_eMenuControls) );
	trace("   _eLoadOrder:        " + _eLoadOrder + ", is enabled: " + isAreaEnabled(_eLoadOrder) );
	trace("   _eInitialization:   " + _eInitialization + ", is enabled: " + isAreaEnabled(_eInitialization) );
	trace("   _eSystemGeneration: " + _eSystemGeneration + ", is enabled: " + isAreaEnabled(_eSystemGeneration) );
	
	trace("   _eCollisionEvent:   " + _eCollisionEvent + ", is enabled: " + isAreaEnabled(_eCollisionEvent) );
	trace("   _eCoreFunctions:    " + _eCoreFunctions + ", is enabled: " + isAreaEnabled(_eCoreFunctions) );
	trace("   _eViewer:           " + _eViewer + ", is enabled: " + isAreaEnabled(_eViewer) );
	trace("   _eLayout:           " + _eLayout + ", is enabled: " + isAreaEnabled(_eLayout) );
	trace("   _eZooming:          " + _eZooming + ", is enabled: " + isAreaEnabled(_eZooming) );
}
traceLoggingSettings();
traceLoggingSettingsÿÿÿÿÿOOÿÿÿCPicText	ëüÿÿdÿÿÿ*8
ArialÌÿ"(LogManagerÿÿÿ?ÿÿ"ÿŒfunction logMessage (p_message, p_funcArea, p_AltFuncArea1, p_AltFuncArea2)
{

	bDebugFuncArea	= false;
	bValidArea 		= true;


	//trace ("Log Message Called.");
	if ( false == bDebugFuncArea)
	{
		//trace ("...Testing Area: " + p_funcArea);
		bValidArea 		= isValid(p_funcArea);
		if( bValidArea )
			bDebugFuncArea = isAreaEnabled( p_funcArea);
		//trace (".....areaEnabled?: " + bDebugFuncArea);
	}
	
	if ( false == bDebugFuncArea)
	{
		//trace ("...Testing Area: " + p_AltFuncArea1);
		bValidArea 		= isValid(p_AltFuncArea1);
		if( bValidArea )
			bDebugFuncArea = isAreaEnabled( p_AltFuncArea1);
		//trace (".....areaEnabled?: " + bDebugFuncArea);
	}

	if ( false == bDebugFuncArea)
	{
		//trace ("...Testing Area: " + p_AltFuncArea2);
		bValidArea 		= isValid(p_AltFuncArea2);
		if( bValidArea )
			bDebugFuncArea = isAreaEnabled( p_AltFuncArea2);
		//trace (".....areaEnabled?: " + bDebugFuncArea);
	}


	if (bDebugFuncArea)
	{	
		trace ( p_message );
	}else
	{
		if ( m_bWarnOnFilteredMsg)
		{
			trace ("Warning, message filtered out.  FunctionAreas: "
					 + p_funcArea + ", " + p_AltFuncArea1 + ", " + p_AltFuncArea2 );
		}
	}
}

function isAreaEnabled(p_funcArea)
{
	if ( 0 == enabledFuncAreas.length)
		return false;     			// NO areas enabled	

	for (i=0; i< enabledFuncAreas.length; i++)
	{
		_tempEnabledArea = enabledFuncAreas[i];
		if( p_funcArea == _tempEnabledArea)
			return true;
	}
	//trace("...Tracing disabled for Area: " + p_funcArea);
	return false;
}

function isValid ( p_functionArea)
{
	//trace ("...Testing if Area is valid: " + p_functionArea);

	bIsValid = true;
	if (p_functionArea == null || p_functionArea > _eMaxArea || p_functionArea < _eMinArea)  
	{
		bIsValid = false;
		//trace ("...Invalid Logging Area. Specified: " + p_funcArea);
	}
	//trace ("......area found to be valid?: " + bIsValid);
	return bIsValid;
}
logMessage()ÿÿÿÿOÿÿÿÿÿÿ
CPicSprite
í%«
MÿE_bgÿÿÿÿó>Aı0ı00ÿÿÿ?ÿÿÓW
Layer 1ÿÿÿÿOÿÿÿÿÿÿ
CPicSprite
ÿÿÿÿ*Ô	_plusSign
ÿÿÿÿ(Ëc0onClipEvent (load){
	_parent.showMenu(true);
}
_minusSignÿÿ
CPicButton
 #‰ˆÿ
ükbon(release, releaseOutside){
	bCurrShowMenu = _minusSign._visible;
	showMenu(!bCurrShowMenu);
}
Mÿ7–ÿÿÿ?ÿÿ]nÿ1function showMenu( p_bShowMenu){
	trace ("Show Menu called...");

	_root.logMessage("...Show Menu Called",
					 _root._logMgr._eInitialization,
					 _root._logMgr._eMenuControls);

	_minusSign._visible = p_bShowMenu;
	_plusSign._visible = !p_bShowMenu;
	_parent._menu._visible = p_bShowMenu;
}

showMenu()ÿÿÿÿOÿÿÿÿÿÿÿÿUN² w  M	-àMà} ² Òıÿ²ßà‰ßà²÷Ò ² ƒßNß.N ÿÿÿ?ÿÿ8
Layer 1ÿÿÿÿOÿÿÿÿÿÿ
CPicSprite	
	ÿÿÿÿ-	E_nobÿÿ
CPicButton
‘…šYÿ
%;ºon (press){
	_nob._x = this._xmouse;
	_nob.startDrag(true, -30,  0, 30,0);
	this.bDragging = true;

}
on(release, releaseOutside)
{
	_nob.stopDrag();
	this.bDragging = false;
}ÿÿÿÿ(óPû`	ÿÿÿ?ÿÿ}v
zoom()ÿÿÿÿOÿÿÿÿÿÿ
CPicButton
†,«ªÿ
2gÌon(release){
	_root.logMessage ( "\nDelete Item pressed" );
	
	EnvManager = _parent._parent._envMgr;
	l_currEnv = EnvManager.getCurrentEnv();
	l_currEnv.setAction( l_currEnv._sysMgr.DELETE_ITEM );
}ÿÿÿÿÿÿ(Óÿƒ|{|´L„„„|´´|„„„L³{||„LLÿÿÿ?ÿÿÏ
Layer 1ÿÿÿÿOÿÿÿÿÿÿÿÿÕâ<<Ä<ÄÄÄÄ<Ä<<ÿÿÿ?ÿÿp
Layer 1ÿÿÿÿOÿÿ‚ƒ„şÿÿÿ†‡ˆ‰ŠşÿÿÿŒ‘şÿÿÿ“”•–—˜™š›œşÿÿÿ ¡¢£¤¥¦§¨©ª«şÿÿÿ­®¯°şÿÿÿ²³´µşÿÿÿ·¸¹º»¼½¾¿ÀÁÂÃÄÅÆÇÈÉÊşÿÿÿÌÍÎÏĞÑÒÓÔÕÖ×ØÙşÿÿÿÛÜİŞßàáâãäåæşÿÿÿèéêëìíîïğñòóşÿÿÿõö÷øùúûüışÿÿÿÿÿ
CPicSpriteşÿÿÿ
/Èşÿÿÿÿÿÿÿ'‹B‰
‰ÿÿÿÿ*¦&ÿÿ
CPicButtonÉÉ
†,«ªÉÉÿ
]âon(press){

}
on(release){
	_root.logMessage("\nZoom In ...button pressed", _root._logMgr._eMenuControls);
	
	EnvManager = _parent._parent._envMgr;
	l_currEnv = EnvManager.getCurrentEnv();
	l_currEnv.zoomInSystem();
}ÿÿÿ?ÿÿ»f
Layer 1ÿÿÿÿOÿÿÿÿÿÿ	CPicShapeÿÿÿÿqZ˜şÄ4Zh<ÿÿÿ?ÿÿM
Layer 1ÿÿÿÿOÿÿÿÿÿÿÿÿÌÿÿÿÿÿÿ(ÿÿÿÿ×‘Ş³à…¹Ë¥Ù¦ÙƒÚÙ¤&Ë&¤&xÙ[Ù56øÿ\&&—&&[…'ëFĞğíÕ+ˆĞşşúúÕ'Ø¹øqîÀõP
êÿÿÿ?ÿÿ³9
Layer 1ÿÿÿÿOÿÿÿÿÿÿ
CPicSpriteÿÿÿÿ
/Èÿÿÿÿÿÿÿÿ'ŞTˆ
ˆÿÿÿÿ(-ÿÿ
CPicButtonÈÈ
†,«ªÈÈÿ
ÈMäon(press){

}
on(release){	
	_root.logMessage("\nZoom Out ...button pressed", _root._logMgr._eMenuControls);

	EnvManager = _parent._parent._envMgr;
	l_currEnv = EnvManager.getCurrentEnv();
	l_currEnv.zoomOutSystem();
}ÿÿÿ?ÿÿG
Layer 1ÿÿÿÿOÿÿÿÿÿÿCPicText	=Šıÿÿ&ÿÿÿqT‹Arial Blackÿÿÿÿ"(Debugÿÿ
CPicSprite
Mÿ6Iÿÿ
CPicButton
Ó›:Õÿ
MÌon(press){
	_root.logMessage("\nDebug System ...button pressed", _root._logMgr._eMenuControls);

	EnvManager = _parent._parent._envMgr;
	l_currEnv = EnvManager.getCurrentEnv();
	l_currEnv.dumpSystem();
} ÿÿÿ?ÿÿD
Layer 1ÿÿÿÿOÿÿÿÿzÿÿÿÿÿ(ñœpş00d0pş0pşrşcÿÿÿ?ÿÿ™
Layer 1ÿÿÿÿOÿÿÿÿ´		ÿÿÿÿÿ<óã7ÿ‘0ãş0qş0åşçş0ıÿoş0æş00ÿÿÿ?ÿÿ9
Layer 1ÿÿÿÿOÿÿÿÿÿÿ
CPicSprite
¾4¿ÿÿÿÿ#‡~	_stopIcon
¤ÿÿÿÿ$>7onClipEvent (load)
{
	_parent.setPausedIcon(true);
}_goIconÿÿ
CPicButton
†,«ªÿ
$ÿñon(press){
	_root.logMessage("\nPlay (Stop) ...button pressed", _root._logMgr._eMenuControls);

	setPausedIcon( !bPaused );
	
	EnvManager = _parent._parent._envMgr;
	l_currEnv = EnvManager.getCurrentEnv();

	if (bPaused){
		_root.logMessage("..stopping the system",  _root._logMgr._eMenuControls);
		l_currEnv.stopSystem();
	}else{
		_root.logMessage("..setting system in motion",  _root._logMgr._eMenuControls);
		l_currEnv.playSystem();
	}	
	
}
on(release, releaseOutside){

}ÿÿÿ?ÿÿ<—function setPausedIcon( p_bIsPaused )
{
	this.bPaused = p_bIsPaused;

	this._stopIcon._visible = !bPaused;
	this._goIcon._visible   = bPaused;	
}
setPaused()ÿÿÿÿOÿÿÿÿÿÿ
CPicButton
†,«ªÿ
¦.ÿ†on(press){

}
on(release){
	_root.logMessage("\nRestore System ...button pressed", _root._logMgr._eMenuControls);


	//	_parent._playStopButton.setPausedIcon(true);
	EnvManager = _parent._parent._envMgr;
	l_currEnv = EnvManager.getCurrentEnv();
	l_currEnv.restoreSystem();
	_root.logMessage("...TODO Menu should query System Controller to see if paused", _root._logMgr._eMenuControls);
		
}ÿÿÿÿÿÿÿÿÿÿ(Õ
x!-İÿMß	 éß ²	VÒà²!àâß³à@Øº440fşT0.?ş224á=`Ç&ÿ4ÁZ64@n@74[ÿ74Á¿y@ÊşĞÿĞüĞšĞıÿÿÿ?ÿÿ³
Layer 1ÿÿÿÿOÿÿÿÿÿÿ
CPicSprite
Mÿ6ñZÿÿCPicText	œ^ıÿÿ:ÿÿÿD‹Arial Blackÿÿÿÿ"(Settingsÿÿ
CPicButton
Ó›:Õÿ
Škªon(release){
	_parent._playStopButton.setPausedIcon(true);
	EnvManager = _parent._parent._envMgr;
	l_currEnv = EnvManager.getCurrentEnv();
	l_currEnv.displaySettings();
}ÿÿÿ?ÿÿñm
Layer 1ÿÿÿÿOÿÿÿÿÿÿ
CPicButton
{Óÿÿn\şÿÿXUÿÿÿ
Riÿron(press){
	_root.logMessage("\nNext System ...button pressed", _root._logMgr._eMenuControls);

	//_parent._playStopButton.setPausedIcon(true);
	EnvManager = _parent._parent._envMgr;
	l_currEnv = EnvManager.getCurrentEnv();
	l_currEnv.generateNewSystem();
	_root.logMessage("...TODO Menu should query System Controller to see if paused", _root._logMgr._eMenuControls);
}ÿ™3ÿÿÿÿÿ(ñçÑËşÓş`À!CTŸ0X0/ËşĞ.ÑĞÑñ^20Œmş0lşuş`Á!CT 5ÿÿÿ?ÿÿ®r
Layer 1ÿÿÿÿOÿÿÿÿÿÿ
CPicSprite |
 |Mÿ5ÿL	‘
	‘ÿÿÿÿ	
şÿÿÿşÿÿÿ !"#şÿÿÿ%&'()*+,-.şÿÿÿ0123456789şÿÿÿ;<=>?@ABCDşÿÿÿFGHIJKLMNOşÿÿÿQRSTUVWXYZşÿÿÿ\]^_`şÿÿÿbcdefghijkşÿÿÿmnopqşÿÿÿstuvwxyz{|şÿÿÿ~ d_nextButton–|
–|ÿÿÿÿ ĞI‡
Héºè‡ÿÿÿÿ!;_refreshButtonÂ™
	@2?Â™ÿÿÿÿ"uXonClipEvent (load)
{
//	this.useHandCursor = false;
	//	_global.useHandCursor = false;
}_playStopButtonö%|
ö%|ÿÿÿÿ%1¤ç
cÿ¤çÿÿÿÿ&Œìæ
dÿ£ìæÿÿÿÿ)~5õ„
õ„ÿÿÿÿ,‡
RonClipEvent (load){
	bDragging = false;
}
/*
onClipEvent ( mouseMove ){

}*/Ÿ|
Ÿ|ÿÿÿÿ8smÿÿÿ?ÿÿ„g
Layer 1ÿÿÿÿOÿÿÿÿÿÿ
CPicSprite
Mÿ6ÏÿÿCPicText	œ^ıÿÿ:ÿÿÿD‹Arial Blackÿÿÿÿ"(Cancelÿÿ
CPicButton
¯:Şÿ
PU'on(release){
	_parent.hideSettings();
}ÿÿÿ?ÿÿËk
Layer 1ÿÿÿÿOÿÿÿÿÿÿ
CPicSprite
Mÿ6¨EÿÿCPicText	œ^ıÿÿ:ÿÿÿD‹Arial Blackÿÿÿÿ"(OKÿÿ
CPicButton
²İİÿ
<jqon(release){
	trace("Trying to set num of objects to..."+_parent._inNumObjects);	
	_parent.applySettings(true);
}ÿÿÿ?ÿÿ×
Layer 1ÿÿÿÿOÿÿÿÿÿÿ
CPicSprite
nÿüşš<ÿ„ÿÿ
CPicButton
Yÿ
OVon (release){
   _parent.setType(	_parent._parent._settingsData._eTypeCustom, this);
}ÿÿCPicText	¥cşÿÿ:=TextField39Impactÿÿÿÿ"(Customÿÿÿ?ÿÿğq
Layer 1ÿÿÿÿOÿÿÿÿÿÿ
CPicSprite
nÿüşš<ÿrkÿÿ
CPicButtonÿÿÿÿ
Yÿÿÿÿÿ
æ2Von (release){
   _parent.setType(	_parent._parent._settingsData._eTypeSingle, this);
}ÿÿCPicText	¥şÿÿÄ=TextField39Impactÿÿÿÿ"(Singleÿÿÿ?ÿÿra
Layer 1ÿÿÿÿOÿÿÿÿÿÿ
CPicSprite
nÿüşš<ÿ^ÿÿ
CPicButton
Yÿ
œHVon (release){
   _parent.setType(	_parent._parent._settingsData._eTypeSpiral, this);
}ÿÿCPicText	¥şÿÿÄ=TextField39Impactÿÿÿÿ"(Spiralÿÿÿ?ÿÿ&
Layer 1ÿÿÿÿOÿÿÿÿÿÿ
CPicSprite
nÿüşš<ÿa:ÿÿ
CPicButton
Yÿ
Í"Uon (release){
   _parent.setType(	_parent._parent._settingsData._eTypeRings, this);
}ÿÿCPicText	¥şÿÿÄ=TextField39Impactÿÿÿÿ"(Ringsÿÿÿ?ÿÿ(
Layer 1ÿÿÿÿOÿÿÿÿÿÿ
CPicSprite
nÿüşš<ÿa<ÿÿ
CPicButton
Yÿ
ÿ/Ton (release){
   _parent.setType( _parent._parent._settingsData._eTypeGrid, this);
}ÿÿCPicText	¥şÿÿÄ=TextField39Impactÿÿÿÿ"(Gridÿÿÿ?ÿÿI,
Layer 1ÿÿÿÿOÿÿÿÿÿÿÿÿó&ü²û#¸!…/Ì3/Ìq0MLB3q#3/{/0NH{Ñ#3ÌĞ30³ú#³½ÍÌ¡Ğ„Ğÿÿÿ?ÿÿƒy
Layer 1ÿÿÿÿOÿÿÿÿÿÿ
CPicSprite
nÿüşš<ÿfÿÿ
CPicButton
Yÿ
ïuVon (release){
   _parent.setType(	_parent._parent._settingsData._eTypeBinary, this);
}ÿÿCPicText	¥şÿÿÄ=TextField39Impactÿÿÿÿ"(Binary Xÿÿÿ?ÿÿ6
Layer 1ÿÿÿÿOÿÿÿÿd¾ÿó&ü²û#¸!…/Ì3/Ìq0MLB3q#3/{/0NH{Ñ#3ÌĞ30³ú#³½ÍÌ¡Ğ„Ğÿÿÿ?ÿÿ~
Layer 1ÿÿÿÿOÿÿÿÿÿÿ
CPicSprite
dÿÖjÿÿÿ?ÿÿ/
baseÿÿÿÿOÿÿÿÿÿ?ÿÿ-Btfunction setLocation (p_x, p_y){
	//this._alpha = 0;
	this._x = p_x;
	this._y = p_y;
	//this.gotoAndPlay (0);
}
setLocation()ÿÿÿÿÿOOÿÿÿÿÿ	CPicShapeûÿÿÿÏøÿÿÿÿÿÿsuñ(ñ0àü0Ø0 ‚şÿÿÿ„…†‡ˆşÿÿÿŠ‹Œşÿÿÿ‘’“”şÿÿÿ–—˜™š›şÿÿÿŸ ¡şÿÿÿ£¤¥¦şÿÿÿ¨©ª«¬­®¯°±²³´µşÿÿÿ·¸¹º»¼½¾¿ÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏĞÑÒÓşÿÿÿÕÖ×ØÙşÿÿÿÛÜİŞßàşÿÿÿâãäåæşÿÿÿèéêëìíîşÿÿÿğñòóôõöşÿÿÿøùúûüşÿÿÿşÿÿÿÿ?ÿÿÖ<
Layer 1ÿÿÿÿOÿÿÿÿÿÿÿÿ×
ØŞâ‹¶‹0(íÔ¶u4áuÂÿ60ä=<L>6uJu0Ø,J‹4‹>Êı0Â<´şÂÿÊıÿÿÿ?ÿÿ¿`
Layer 1ÿÿÿÿOÿÿÿÿÿÿ	CPicShapeàBŸÌÿrò½ÿßçÿ0¸ü0øı0Hÿÿÿ?ÿÿá
Layer 1ÿÿÿÿOÿÿÿÿÿÿ	CPicShaÿÿÿÿ
CPicSprite˜şÿÿ
˜Ğ˜şÿÿMÿSWÿÿCPicText	îÿÿ6ïÿÿ‹Arial Blackÿÿÿÿ"(Type:xõÿÿğÿÿ
xõÿÿğÿÿÿÿÿÿ¿_typeHighlightòúÿÿğÿÿ
òúÿÿğÿÿdÿÜT
_btnBinaryoğÿÿ
oğÿÿdÿWF_btnGridëğÿÿ
ëğÿÿdÿil	_btnRingsgğÿÿ
gğÿÿdÿÑ}
_btnSpiralwõÿÿ›ğÿÿ
wõÿÿ›ğÿÿdÿ
_btnSingleãğÿÿ
ãğÿÿdÿ@
_btnCustomÿÿÿ?ÿÿÌH
	baseLayerÿÿÿÿOÿÿ		íÿÿöÿÿŸ‹Arial Blackÿÿÿÿ"(Number of Objects:		úÿÿòõÿÿ£‹_inNumObjectsArial Blackÿÿÿÿ"(10_inNumObjectsá	³
á	³ÿÿÿÿDÆ
ÆÿÿÿÿS		2íÿÿ|èÿÿ—8ArialÌÿ"(SettingsMenu_label
ÿÿÿÿ÷vùvï¼lsfÿ4õL³šŒş4õÿ“fÿŒş4<³³şfÿ0Óü4“Œşš4
³Mfÿt4
mšt4MMtš0-ÿÿÿ?ÿÿJI
buttonLayerÿÿÿÿÿOOÿÿÿÿ?ÿÿÏÿºfunction setType( p_nType ){
	
	l_xTypeButton = null;
	switch (p_nType){
		case m_xSettings._eTypeSingle:
										l_xTypeButton = _btnSingle;
										break;
		case m_xSettings._eTypeBinary:
										l_xTypeButton = _btnBinary;
										break;
		case m_xSettings._eTypeSpiral:
										l_xTypeButton = _btnSpiral;
										break;
		case m_xSettings._eTypeRings:
										l_xTypeButton = _btnRings;
										break;
		case m_xSettings._eTypeGrid:
										l_xTypeButton = _btnGrid;
										break;
		case m_xSettings._eTypeCustom:
										l_xTypeButton = _btnCustom;
										break;
	}
	_typeHighlight.setLocation	( l_xTypeButton._x,  l_xTypeButton._y);
	this._nInModelType = p_nType;
}
setTypeÿÿÿÿOÿÿÿÿÿÿ?ÿÿjJÿfunction displaySettings(p_xSettingsData){
	trace ("...Displaying settings:"+p_xSettingsData.settingsInfo());
	this.m_xSettings = p_xSettingsData;
	
	this._inNumObjects = p_xSettingsData.getObjectCount();
	this.setType ( p_xSettingsData.getType() );
	
	this._visible = true;
}
displaySettingsÿÿÿÿ™3Ìÿÿÿÿ?ÿÿ&sÿÉfunction applySettings(p_bCloseAfterwards){
	
	l_env    = this._parent;
//	l_system = l_env._sysMgr._system;

	trace ( "ToDO: change the way settings are set from UI into SystemSettings");
	trace ( " ... Path:   Scene1>SystemEnvironment>SystemSettingsMenu>SystemMenuOK");
	l_env._settingsData.setObjectCount( this._inNumObjects );
	l_env._settingsData.setType( this._nInModelType );

	l_env.generateNewSystem();
	
	if(p_bCloseAfterwards)
		hideSettings();
}
applySettingsÿÿÿÿÿÿOÿÿÿÿ?ÿÿ‘}2function hideSettings(){
	this._visible = false;
}
hideSettingsÿÿÿÿÿOÿÿÿÿÿÿÿ?ÿÿÅÿ‰function generateNewSystem()
{
	_root.logMessage("...Generating System as Requested", _root._logMgr._eMenuControls);
	_root.logMessage(".......should create a History Event", _root._logMgr._eMenuControls);
	
	this.m_bIsPaused 	= true;
	_parent._sysViewer.clearDisplay (); 
	
	_parent._settingsMgr.generateNewModelData (_parent._sysModel);
	_parent._sysViewer.initializeDisplay (_parent._sysModel); 
//	_parent._sysViewer._x = 

	_root.logMessage(".......create a local backup", _root._logMgr._eMenuControls);
	_parent._sysModel.createBackup();
	
}

function restoreSystem()
{
	_root.logMessage("...Restoring System as Requested", _root._logMgr._eMenuControls);
	this.m_bIsPaused 	= true;
	_parent._sysModel.restore();	
	_parent._sysViewer.initializeDisplay (_parent._sysModel); 
	//_parent._sysViewer.updateLocations (_parent._sysModel);
}
function stopSystem()
{
	_root.logMessage("...Stopping System as Requested", _root._logMgr._eMenuControls);
	setState( SYSTEM_STATE_PAUSED );
	//m_bIsPaused = true;
}
function playSystem()
{
	_root.logMessage("...Setting System in Motion as Requested", _root._logMgr._eMenuControls);
	setState( SYSTEM_STATE_MOVING );
	//m_bIsPaused = false;
}


function dumpSystem()
{
	_root.logMessage("...Dumping System as Requested", _root._logMgr._eMenuControls);
	trace (_parent._sysModel.systemInfo() );
}

function zoomInSystem()
{
	_root.logMessage("...Zooming in on System as Requested", _root._logMgr._eMenuControls);
	setState( SYSTEM_STATE_ZOOMING );
	
	_root.logMessage("...Current Viewer Info" + _parent._sysViewer.viewerInfo(), _root._logMgr._eMenuControls);
	_parent._sysViewer.zoomIn();
}

function zoomOutSystem()
{	
	_root.logMessage("...Zooming out of System as Requested", _root._logMgr._eMenuControls);
	setState( SYSTEM_STATE_ZOOMING );
	
	_root.logMessage("...Current Viewer Info" + _parent._sysViewer.viewerInfo(), _root._logMgr._eMenuControls);
	_parent._sysViewer.zoomOut();
}

menuAPIÿÿÿÿÿOOÿÿÿÿ?ÿÿ™hûfunction executeAction( p_object ){
	
	if (DELETE_ITEM = currAction){
		_root.logMessage ("\nExecuting Delete for Object: " + p_object._name);
		_system.removeObjectByName (p_object._name);
	}else{
		_root.logMessage ("\nNo Action Set.");
	}
}
executeActionÿÿÿÿÿÿOÿÿÿÿ?ÿÿÕ<function logMessage(p_level, p_message)
{
	trace("************* OLD LOG MESSAGE CALLED ****** in SysController " );
	trace(p_message);
}


utilFunctions()ÿÿÿÿOÿOÿÿÿÿ?ÿÿéÿ#function setState(  p_nNewState )
{
	
	_root.logMessage("Changing State to: " + p_nNewState, _root._logMgr._eCoreFunctions);
	switch ( p_nNewState )
	{
		case SYSTEM_STATE_PAUSED:
			this.onEnterFrame = null;
			break;
		case SYSTEM_STATE_MOVING:
			this.onEnterFrame = moving;
			break;
		case SYSTEM_STATE_ZOOMING:		
			this.onEnterFrame = zooming;		
			break;
		default:
			_root.logMessage("...Error changing system. Invalid State specified.", _root._logMgr._eCoreFunctions);
			return;
	}
	
	// Check to see if the system is already zooming,
	//  in which case do not overwrite the saved state
	bZoomWhileZooming = (SYSTEM_STATE_ZOOMING == p_nNewState) && (SYSTEM_STATE_ZOOMING == m_nCurrState);
	if ( !bZoomWhileZooming)
	{
		m_nPrevState 				= m_nCurrState;
		m_nCurrState				= p_nNewState;	
	}
}
setStateÿÿÿÿOÿÿÿÿÿ?ÿÿ@ÿpfunction moving() 
{	//System in motion
	l_startTime = new Date();
	
	
	//  Model the next time step
	_parent._sysModel.stepMotion();
	
	//  Update the display
	_parent._sysViewer.updateLocations(_parent._sysModel);
	
	l_currTime = new Date();
	elapsedTimeInMillis = l_currTime.getTime()-l_startTime.getTime();
	_parent._fpsDisplay.text = "ms:"+elapsedTimeInMillis;
}

movingÿÿÿÿOÿOÿ
State BehaviorÿÿÿÿÿÿOÿÿÿÿ?ÿÿ²]ÿ«function zooming ()
{
	// If Viewer is zooming, trigger step of Zoom
	_root.logMessage("...Zooming system in controller", _root._logMgr._eZooming);	
	_parent._sysViewer.stepZoom();
	
	bDoneZooming  = _parent._sysViewer.isDoneZooming();
	
	// Restore previous (Moving vs. Paused) when done
	if (bDoneZooming)
	{
		_root.logMessage("...Done zooming system in controller", _root._logMgr._eZooming);
		setState (m_nPrevState);
	}
}
zoomingÿÿÿÿÿOOÿÿÿCPicText	(( 8ArialÌÿ"(SystemControllerÿÿÿ?ÿÿê3
baseLayer_DO_NOT_DELETEÿÿÿÿOÿÿpe%YŞâqwÿÿÿÿsŠÂÀĞP00ö0°ò0Ğ	ÿÿÿ?ÿÿ‘Y
Layer 1ÿÿÿÿOÿÿÿÿÿÿ	CPicShapeõÿÿšÿ™ÿÿÿÿÿÿÿÿÿsĞ6÷ÿ0„Èş£òAä0ÈÿĞş\r0 öş!|0¶äş0¤ÿ0iP´.P!d¨Á4
H* pjÿâşÿÿÿ?ÿÿö>
Layer 1ÿÿÿÿOÿÿÿÿÿÌ3ÿÿÿÿÿÑw•Ş^0<õÿ0×ş‰0B02ÿïşÔ~ó†F>‰¤İWê w0ÆÊş0®ÿK\½ÿÿÿ?ÿÿ¡
Layer 1ÿÿÿÿOÿÿÿÿ3ÿÿsû¨ı°0î0Pû<üøÿÿÿ?ÿÿ_
Layer 1ÿÿÿÿOÿÿÿÿÿÿ
CPicButton
CVUÿ
2`Ôon (press)
{
	trace("\nObject Pressed: " + this + ", name: " + this._name + ", this level: " + this.getDepth() );
	//	_parent._parent.executeAction (this);
	this.startDrag();
}

on (release)
{
this.stopDrag();	
}ÿÿÿÿÕF¹kAFëÿ>)âF¾âk¹ÁÖëÿ¹â”â¾ââ¹ÁÖ¹A”âFâ>)Fœÿÿÿœÿÿÿ3¦ÿÿÿGºÿÿÿGG3ZddddZ3GGGºÿÿÿZÍÿÿÿdåÿÿÿdºÿÿÿG¦ÿÿÿ3œÿÿÿœÿÿÿœÿÿÿœÿÿÿåÿÿÿ¦ÿÿÿÍÿÿÿºÿÿÿºÿÿÿºÿÿÿºÿÿÿÍÿÿÿ¦ÿÿÿåÿÿÿœÿÿÿœÿÿÿdåÿÿÿdÍÿÿÿZºÿÿÿGÿÿÿ?ÿÿ·~
Layer 1ÿÿÿÿOÿÿÿÿÿÿCPicText	'((E8‚şÿÿÿ„…†‡ˆ‰Š‹Œ‘’“”•–—˜™š›œŸ ¡¢£¤¥¦§¨©ªşÿÿÿ¬­®¯°±²³´µ¶·¸¹º»¼½¾¿ÀÁÂÃÄÅÆÇşÿÿÿÉÊËÌÍİÏĞÑÒÓÔÕÖ×ØÙÚÛÜşÿÿÿŞßáşÿÿÿâãşÿÿÿåæçèéêëìíîşÿÿÿıÿÿÿñòóôõö÷øùúûüışÿÿÿÿÿÿ?ÿÿĞÿ½function hideObjects(){
	_root.logMessage("......Hiding Objects For System Viewer:" + this,
								 _root._logMgr._eInitialization);

	this.Explosion01._visible 		= false;
	this.Explosion02._visible 		= false;
	this._label.text 				= "";
	this._label.selectable 			= false;	
	this.ObjTemplate._visible 		= false;
	this._centMassMarker._visible 	= false;
	this._eraser._visible 			= false;
	this._baseCurtain._visible 		= false;
}
hideObjects();
hideObjectsÿÿÿÿÿÿOÿÿÿÿ?ÿÿk6ÿëfunction viewerInfo()
{
	l_retString		= "\nViewer Info....";
	
	l_retString 	+= "\n  Misc data";	
	l_retString 	+= "\n    m_nStageFPS = " + m_nStageFPS;
	l_retString 	+= "\n    m_xSysEnv   = " + m_xSysEnv;
	l_retString 	+= "\n    m_xSysMgr   = " + m_xSysMgr;
	l_retString 	+= "\n    m_xSettings = " + m_xSettings;


	l_retString 	+= "\n  Level Offsets";	
	l_retString 	+= "\n    m_nDepthOffsetCollisions = " + m_nDepthOffsetCollisions;
	l_retString 	+= "\n    m_nDepthOffsetObjects    = " + m_nDepthOffsetObjects;	

	l_retString 	+= "\n  Zoom Parameters";
	l_retString 	+= "\n    m_nZoomDefault 		= " + m_nZoomDefault;
	l_retString 	+= "\n    m_nZoomSecondsPer     = " + m_nZoomSecondsPer;
	l_retString 	+= "\n    m_nZoomNumSteps   	= " + m_nZoomNumSteps;
	l_retString 	+= "\n    m_nZoomCurFactor   	= " + m_nZoomCurFactor;
	l_retString 	+= "\n    m_nZoomNewFactor 	    = " + m_nZoomNewFactor;
	l_retString 	+= "\n    m_nTempStepScale  	= " + m_nTempStepScale;
	l_retString 	+= "\n    m_nEndScale   		= " + m_nEndScale;
	l_retString 	+= "\n    m_nZoomStepCounter	= " + m_nZoomStepCounter;

	l_retString 	+= "\n  Display area conversions";
	l_retString 	+= "\n    m_AU                 = " + m_AU;
	l_retString 	+= "\n    m_nDisplayConvFactor = " + m_nDisplayConvFactor;
	l_retString 	+= "\n    m_nDisplayOffsetX    = " + m_nDisplayOffsetX;
	l_retString 	+= "\n    m_nDisplayOffsetY    = " + m_nDisplayOffsetY;
	l_retString 	+= "\n    m_nDisplayWidth 	   = " + m_nDisplayWidth;
	l_retString 	+= "\n    m_nDisplayHeight 	   = " + m_nDisplayHeight;

	l_retString 	+= "\n  Currently displaying";
	l_retString 	+= "\n    m_nCurrObjectsDisplayed = " + m_nCurrObjectsDisplayed;
	l_retString 	+= "\n    m_nCurrColsDisplayed 	  = " + m_nCurrColsDisplayed;


	return l_retString;

}

viewerInfoÿÿÿÿÿÿOÿÿÿ
CPicSpriteà’
"à’ÿÿÿÿ	0BObjTemplateùç
"ùçÿÿÿÿ;,Explosion01éË
"éËÿÿÿÿ"TExplosion02‚
ì
¨!‚
ìÿÿÿÿ"_baseCurtainL	
ŒL	ÿÿÿÿ@_eraserÿÿCPicText	((8ArialÌÿ"(System Viewer_labelÿÿÿ?ÿÿÄf
baseLayer_withObjectsÿÿÿÿOÿÿÿÿÿ?ÿÿ‹yÿ¹function stepZoom(){
	//CHECK TO SEE IF SYSTEM IS DONE ZOOMING
	l_nScaleDiff 	 = Math.abs(this._xscale - m_nEndScale);
	l_nScaleStepSize = Math.abs(m_nTempStepScale);
	l_bWithinOneStep =  (l_nScaleDiff < 1.1*l_nScaleStepSize);
/*
	// Zoom Parameters
	m_nZoomDefault 			= 20.0;
	m_nZoomSecondsPer		= 0.5; 
	m_nZoomNumSteps 		= m_nStageFPS * m_nZoomSecondsPer;
	m_nZoomCurFactor 		= m_nZoomDefault;
	m_nZoomNewFactor		= m_nZoomCurFactor;
	m_nTempStepScale		= 0;
	m_nEndScale				= 100;
	m_nZoomStepCounter		= 0;
*/
	

	_root.logMessage("...Stepping zoom", _root._logMgr._eZooming);
	
	
	//_root.logMessage ("Curr Scale: " +this._xscale+", EndScale: " + nEndScale
	//				 + ", Diif: " + nScaleDiff + ", StepScaleSize: " + nScaleStepSize);
	//_root.logMessage ("..Within one Step? : " + bWithInOneStep);
	if( l_bWithinOneStep ){
		this._xscale = m_nEndScale;
		this._yscale = this._xscale;
		
		trace ("TODO in stepZoom called scaleZoomedObjects");
		this.scaleZoomedObjects();

		m_bSystemIsZooming = false;
		m_nZoomStepCounter = 0;

		Explosion01._xscale = 100 / (this._xscale/100) ;
		Explosion01._yscale = Explosion01._xscale;

		//p_system.Explosion01._visible = false;
		//p_system.Explosion02._visible = false;
		
		m_nZoomCurFactor = m_nZoomNewFactor;
	}else{	
		this._xscale += m_nTempStepScale;
		this._yscale = this._xscale;
		this.scaleZoomedObjects();
	}	

	// CATCH TO INSURE THE ZOOM STOPS EVENTUALLY
	l_bPassedMaxStepCount = (m_nZoomStepCounter >= (m_nZoomNumSteps+2));
	if(m_bSystemIsZooming && l_bPassedMaxStepCount )
	{
		_root.logMessage ("Forcing zoom to Stop, Num Steps: "+m_nZoomStepCounter, _root._logMgr._eZooming);
		m_bSystemIsZooming = false;
		m_nZoomStepCounter = 0;
	}

	m_nZoomStepCounter++;
}
stepZoomÿÿÿÿOÿOÿ
ZoomFunctionsÿÿÿÿOÿÿÿÿÿÿ?ÿÿÿfunction zoomIn(){
	_root.logMessage ("\nSystem Viewer zooming in on system, this = " + this);
	this.m_nZoomNewFactor = this.m_nZoomCurFactor * 1.10;
	zoomSystem();
}

function zoomOut(){
	_root.logMessage ("\nSystem Viewer zooming out system, this = " + this);
	this.m_nZoomNewFactor = this.m_nZoomCurFactor * 0.90;
	zoomSystem();
}

function zoomSystem (){
	_root.logMessage ("System Viewer zooming system....");
	this.m_nEndScale		= (this.m_nZoomNewFactor / this.m_nZoomCurFactor) * this.m_nEndScale;
	this.m_nTempStepScale 	= (this.m_nEndScale - this._xscale) / this.m_nZoomNumSteps;

	this.m_nZoomStepCounter = 0;	
	this.m_bSystemIsZooming	= true;
}



zoomIn/Outÿÿÿÿ™3Ìÿÿÿÿ?ÿÿÚs>function isDoneZooming()
{
	return !this.m_bSystemIsZooming;
}
isDoneZoomingÿÿÿÿÿÿÿÿ?ÿÿ°XÿÎfunction removeObjectAt (p_index){
	_root.logMessage ("Viewer removing Object at Index: " + p_index,
				  			_root._logMgr._eCollisionEvent);
	if ( p_index < 0 || p_index > m_nCurrObjectsDisplayed){
		_root.logMessage("..Specified index outside of range",
				  			_root._logMgr._eCollisionEvent);
		return;
	}
	_root.logMessage ("...Name of System Data:  " +m_systemData,
				  			_root._logMgr._eCollisionEvent);
	
	l_sObjToRemove = m_systemData.Name[p_index];
	_root.logMessage ("...Name of Object To Remove:  " +l_sObjToRemove,
				  			_root._logMgr._eCollisionEvent);
	this[l_sObjToRemove].removeMovieClip();
	
	
	l_sLastObject = m_systemData.Name[m_nCurrObjectsDisplayed-1];
	_root.logMessage ("...Name of Object To Rename:  " +l_sLastObject,
				  			_root._logMgr._eCollisionEvent);
	this[ l_sLastObject ]._name = l_sObjToRemove;
	
	
	m_nCurrObjectsDisplayed--;
	
	//_parent._sysViewer.scaleObjectAt ( p_objB );
}

function removeObjectByName (p_name){
	_root.logMessage ("Removing Object Named: " + p_name);
	nIdexOfObject = -1;
	for(i=0; i< numOfObjs; i++){
		//trace("..Comparing object name to Name: " + Name[i] );
		if ( Name[i] == p_name ){
			nIdexOfObject = i;
			break;
		}
	}
	removeObjectAt (nIdexOfObject);
}
removeObjectÿÿÿÿ™3Ìÿÿÿÿ?ÿÿÊ&ÿœfunction stepFadeOut()
{
	nDecAlphaStep = 100.0 / m_xSettings.nNumColFadeOutSteps;
	nDecSizeStep = 18.0 / m_xSettings.nNumColFadeOutSteps;
	
	//FADE OUT ANY COLLISIONS
	nNumVisibleCols = colFadeOutQueue.length ;
	
	if ( 0 < nNumVisibleCols )
	{
		//_root.logMessage("Fading out cols, numVisible: " + nNumVisibleCols
		//				+ ", alphaStep: " + nDecAlphaStep);
	}

	for ( i=0; i < nNumVisibleCols; i++ )
	{
		xColision = colFadeOutQueue[i];
		nAlphaOfCol = xColision._alpha;
		
		//_root.logMessage ("....Fading out Colision: " + xColision._name 
		//						+ ", curr Alpha: " + nAlphaOfCol);	

		if ( 0 >= nAlphaOfCol )
		{				
			//_root.logMessage ("......Alpha is less than or eq. to zero, removing colision");	
			xColToRemove = colFadeOutQueue.shift();
			if( xColToRemove != xColision)
			{
				//ERROR
				trace ("********** ERROR ******* Removing Colision out of Order ");
				trace ("....Name Col to Remove: " + xColToRemove._name);
				trace ("....Name Col Expected:  " + xColision._name);
			}else
			{
				xColToRemove.removeMovieClip();
				i--;
				nNumVisibleCols--;
			}
		}else
		{

			xColision._alpha -= nDecAlphaStep;
			xColision._width /= 1.5;
			xColision._height /= 1.5;
			//xColision._width -=	nDecSizeStep;
			//xColision._height -=	nDecSizeStep;
			//_root.logMessage ("......Decreased alpha to: " + xColision._alpha);	
		}

	}// end FOR over fade out queue
}
stepFadeOutÿÿÿÿÿÿÿÿ?ÿÿ™6ÿfunction centerMass(){
	xCenterMass = 0;
	yCenterMass = 0;
	nTotalSystemMass = 0;

	//It is likely there will significant rounding error
	// due to dispropotionate values for position and mass
	// One approach could be to calculatie all Mass x PostionX/Y
	// Sort smallest to largest and then sum them before deviding
	for (i=0; i<numOfObjs; i++){
		xCenterMass += 	Px[i] * Mass[i];
		yCenterMass += 	Py[i] * Mass[i];	
		nTotalSystemMass += Mass[i];
	}

	xCenterMass = xCenterMass / nTotalSystemMass;
	yCenterMass = xCenterMass / nTotalSystemMass;

	this.xOffset = -xCenterMass; 
	this.yOffset = -yCenterMass; 

	convertedX = _parent.convertX(xCenterMass);
	convertedY = _parent.convertY(yCenterMass);
	_centMassMarker._x = convertedX;
	_centMassMarker._y = convertedY;
}

centerMassÿÿÿÿÿÿOÿÿÿÿ?ÿÿ	ÿfunction setObjectScale(p_obj, p_mass){
	//_root.logMessage( "Setting Scale of Movie: " + p_obj._name + " with mass: " + p_mass);
	objScale = 100;	
	
	if(p_mass>300*Math.pow(10,27)){
		objScale = 200;
	} else if(p_mass>300*Math.pow(10,24)){
		objScale = 100;
	} else if (p_mass>100*Math.pow(10,24)){
		objScale = 50;
	} else{
		objScale = 25;
	}
	objScale = objScale / (p_obj._parent._xscale/100);
	//_root.logMessage (".Setting Obj Scale To: " + objScale);
	p_obj._xScale = objScale;
	p_obj._yScale = p_obj._xScale;
}
setObjectScaleÿÿÿÿÿOOÿ
DisplayFunctionsÿÿÿÿOÿÿÿÿÿ?ÿÿ¹{ÿ·function scaleZoomedObjects()
{
	
	_root.logMessage ( "......scaling objects", _root._logMgr._eZooming);
	
	for(j=0; j<m_nCurrObjectsDisplayed; j++){
		sObjectName = m_systemData.Name[j];
		
		objToScale = this[ sObjectName ];
		objToScale._xscale = 100 / (this._xscale/100) ;
		objToScale._yscale = objToScale._xscale;
		setObjectScale ( objToScale, m_systemData.Mass[j] );
	}
/*	
	p_system._centMassMarker._xscale = 100 / (p_system._xscale/100) ;
	p_system._centMassMarker._yscale = p_system._centMassMarker._xscale;

	p_system._baseCurtain._xscale = 100 / (p_system._xscale/100) ;
	p_system._baseCurtain._yscale = p_system._baseCurtain._xscale;
	


	for (i=0; i<p_system.numOfObjs; i++){
		objToScale = p_system[ p_system.Name[i] ];
		setScale ( objToScale, p_system.Mass[i] );
	}
	

	for ( i=0; i<m_nCurrObjectsDisplayed; i++)
	{
		sObjectName = p_systemData.Name[i];
		nNewX		= p_systemData.Px[i];
		nNewY		= p_systemData.Py[i];

		nNewXInPixels 	= convertX (nNewX) - this._x;
		nNewYInPixels 	= convertY (nNewY) - this._y;		

		//trace ("["+i+"] moving object to (" + nNewXInPixels + ", " + nNewYInPixels+")");

		this[sObjectName]._x = nNewXInPixels;
		this[sObjectName]._y = nNewYInPixels;
	}
	*/
}

scaleZoomedObjectsÿÿÿÿOÿOÿ"ÿÿÿ?ÿÿrWÿdfunction convertX( p_actualX ){
	xDistanceFromCenter = p_actualX + m_nDisplayOffsetX;
	convertedX = xDistanceFromCenter * m_nDisplayConvFactor;
	return Math.round(convertedX);
}

function convertY( p_actualY ){
	yDistanceFromCenter = p_actualY + m_nDisplayOffsetY;
	convertedY = yDistanceFromCenter * m_nDisplayConvFactor;
	return Math.round(convertedY);
}

convertX/YÿÿÿÿÿOOÿ"ÿÿÿ?ÿÿÿÃfunction clearDisplay()
{
	_root.logMessage ( "......clearing the previous objects "+m_nCurrObjectsDisplayed,_root._logMgr._eInitialization,
																	_root._logMgr._eSystemGeneration);

	// Clear the Display
	for ( i=0; i<m_nCurrObjectsDisplayed; i++)
	{	
		sObjectName = m_systemData.Name[i];
		_root.logMessage ( "........clearing object["+i+"]"+sObjectName,_root._logMgr._eInitialization,
														_root._logMgr._eSystemGeneration);

		this[sObjectName].removeMovieClip();
		//_eraser.swapDepths(m_nDepthOffsetObjects + i);
	}
/*
	for ( i=0; i<m_nCurrColsDisplayed; i++)
	{
		_eraser.swapDepths(m_nDepthOffsetCollisions + i);
	}*/

	m_nCurrObjectsDisplayed = 0;
	m_nCurrColsDisplayed 	= 0;
}
clearDisplayÿÿÿÿÿOOÿ"ÿÿÿ?ÿÿIpÿÉfunction createObjects( p_systemData  )
{
	_root.logMessage ( "......creating new objects", _root._logMgr._eInitialization,
																	_root._logMgr._eSystemGeneration);

	for ( i=0; i<m_nCurrObjectsDisplayed; i++)
	{
		//(m_nDepthOffsetObjects + i);
		sObjectName = p_systemData.Name[i];
		this.ObjTemplate.duplicateMovieClip(sObjectName, m_nDepthOffsetObjects+i);
		
		setObjectColor( this[sObjectName], p_systemData.Red[i],
												 p_systemData.Green[i],
												 p_systemData.Blue[i]);
		setObjectScale( this[sObjectName], p_systemData.Mass[i]);
	}
/*
	for ( i=0; i<m_nCurrColsDisplayed; i++)
	{
		this.Explosion01.duplicateMovieClip(p_systemData.ColName[i], m_nDepthOffsetCollisions+i);
	}*/
}
createObjectsÿÿÿÿOÿOÿ"ÿÿÿ?ÿÿ,iÿIfunction updateLocations( p_systemData  )
{
	_root.logMessage ( "......moving objects", _root._logMgr._eInitialization,
											   _root._logMgr._eSystemGeneration);

	for ( i=0; i<m_nCurrObjectsDisplayed; i++)
	{
		sObjectName = p_systemData.Name[i];
		nNewX		= p_systemData.Px[i];
		nNewY		= p_systemData.Py[i];

		nNewXInPixels 	= convertX (nNewX) - this._x;
		nNewYInPixels 	= convertY (nNewY) - this._y;		

		//trace ("["+i+"] moving object to (" + nNewXInPixels + ", " + nNewYInPixels+")");

		this[sObjectName]._x = nNewXInPixels;
		this[sObjectName]._y = nNewYInPixels;
	}
}
updateLocationsÿÿÿÿ™3Ìÿ"ÿÿÿ?ÿÿJÿXfunction initializeDisplay ( p_sysData )
{
	_root.logMessage ( "...Initializing the display of system: " + p_sysData, _root._logMgr._eInitialization,
																	_root._logMgr._eSystemGeneration);

	_root.logMessage ( viewerInfo() ,_root._logMgr._eInitialization, _root._logMgr._eSystemGeneration);
	clearDisplay();
	
	m_systemData 			= p_sysData;
	m_nCurrObjectsDisplayed = p_sysData.m_nCurrObjCount;
	m_nCurrColsDisplayed 	= p_sysData.m_collisionCount;
 	
	createObjects( p_sysData );	
	updateLocations (p_sysData);
	
	trace ( "Template is visible : " +  this.Object000._visible);
	return;
}


initializeDisplayÿÿÿÿOÿÿ""ÿÿÿÿÿ?ÿÿ:]_root.logMessage("...Loading System Model", _root._logMgr._eLoadOrder);
//initializeData(0);
"constructor (has to be last layer)ÿÿÿÿOÿOÿÿÿCPicText	((Æ8_labelArialÌÿ"(SystemModelÿÿÿ?ÿÿ}y
	baseLayerÿÿÿÿOÿÿÿÿÿ?ÿÿI_ÿ!function getNumberedName( p_sBaseName, p_nNumber )
{
	if (p_nNumber<10){
		sNumberedName = p_sBaseName + "00" + p_nNumber;
	}else if (p_nNumber<100) {
		sNumberedName = p_sBaseName + "0" + p_nNumber;
	}else {
		sNumberedName = p_sBaseName + p_nNumber;
	}
	return sNumberedName;
}
getNumberedNameÿÿÿÿ™3Ìÿÿÿÿ?ÿÿÜ†function getOriginalCount()
{
	return this.m_nInitObjCount;
}

function getCurrentCount()
{
	return this.m_nCurrObjCount;
}
 
	accessorsÿÿÿÿÿOOÿÿÿÿ?ÿÿ­Lÿöfunction handleCollision(p_nIndexA,p_nIndexB){
	_root.logMessage("...Collision Number: "+m_collisionCount, _root._logMgr._eCollisionEvent);
	_root.logMessage("...NumObjs: " + m_nCurrObjCount, _root._logMgr._eCollisionEvent);
	_root.logMessage("...Ball "+p_nIndexB+" was 'swallowed' by ball "+p_nIndexA, _root._logMgr._eCollisionEvent);

	l_lastIndex = m_nCurrObjCount-1;

	//CALCULATE THE MASS OF THE COMBINED OBJECT
	l_newMass = Mass[p_nIndexA] + Mass[p_nIndexB];

	//PRESERVE THE MOMENTUM OF THE OBJECTS
	Vx[p_nIndexA] = (Mass[p_nIndexA]*Vx[p_nIndexA] 
							+ Mass[p_nIndexB]*Vx[p_nIndexB])/l_newMass;
	Vy[p_nIndexA] = (Mass[p_nIndexA]*Vy[p_nIndexA] 
							+ Mass[p_nIndexB]*Vy[p_nIndexB])/l_newMass;

	//ALSO HAVE TO SET THE FORCE BECAUSE COLLISIONS OCCUR IN THE MIDDLE OF CALCULATING THE FORCE
	// DON'T NEED TO SET ACCELERATION, BECAUSE THAT IS CALCULATED
	//  AFTER ALL COLLISIONS COULD OCCUR IN THE CURRENT STEP
	Fx[p_nIndexA] = Fx[p_nIndexA] + Fx[p_nIndexB];
	Fy[p_nIndexA] = Fy[p_nIndexA] + Fy[p_nIndexB];

	//SET NEW LOCATION TO THE MID POINT	
	//root.logMessage ("  ObjA x: " + Px[p_nIndexA] + ", y: " + Py[p_nIndexA], _root._logMgr._eCollisionEvent);
	//_root.logMessage ("  ObjB x: " + Px[p_nIndexB] + ", y: " + Py[p_nIndexB], _root._logMgr._eCollisionEvent);
	//_root.logMessage ("  Mid  x: " + midX + ", y: " + midy, _root._logMgr._eCollisionEvent);
	l_midX = (Px[p_nIndexA] + Px[p_nIndexB])/2;
	l_midY = (Py[p_nIndexA] + Py[p_nIndexB])/2;
	Px[p_nIndexA] = l_midX;
	Py[p_nIndexA] = l_midY;
		

	//SET THE MASS OF THE COMBINED OBJECT
	Mass[p_nIndexA] = l_newMass;	
	_root.logMessage("...New mass is: "+l_newMass,_root._logMgr._eCollisionEvent);

	//if ( bFreeToMove[p_nIndexB] )
	//	bFreeToMove[p_nIndexA] = false;


	//REMOVE THE OTHER OBJECT	
	_root.logMessage("... Calling Remove ObjectAt: " + l_lastIndex,_root._logMgr._eCollisionEvent);
	_parent._sysViewer.removeObjectAt( p_nIndexB );
	
	if(p_nIndexB < l_lastIndex){
		//HAVE TO COPY INFO FROM LAST SLOT INTO THE SLOT THAT WILL OPEN BY
		// REMOVING THE SECOND OBJECT
		_root.logMessage("...Name of obj to remove: "+Name[p_nIndexB], _root._logMgr._eCollisionEvent);
		copyObjectFromTo(l_lastIndex,p_nIndexB);
	}else{
		_root.logMessage("...Object collided with last object", _root._logMgr._eCollisionEvent);
	} 

	m_nCurrObjCount -= 1;
		
	_parent._sysViewer.scaleObjectAt ( p_nIndexB );
	nCurrColIndex = m_collisionCount;
	
	l_bShowCollisions = true; // m_xSettings.bShowCollisions 
	if (l_bShowCollisions)
	{
		//nDepth = m_nDepthOffsetCollisions + collisionCount * 2; 
		//Explosion01.duplicateMovieClip(this.colName[collisionCount],
		//			nDepth);	
		_root.logMessage( "...colision name: " + this.colName[nCurrColIndex],   _root._logMgr._eCollisionEvent);
	
		this.colLocX[nCurrColIndex] = Px[p_nIndexA];
		this.colLocY[nCurrColIndex] = Py[p_nIndexA]; 
		this.colSize[nCurrColIndex] = 100; 

		//this[colName[nCurrColIndex]]._x = _parent.convertX(this,Px[p_nIndexA]);
		//this[colName[nCurrColIndex]]._y = _parent.convertY(this,Py[p_nIndexA]);
		m_collisionCount++;		
	}
}



function copyObjectFromTo(fromIndex,toIndex){

	Mass[toIndex]=Mass[fromIndex];

	Px[toIndex] = Px[fromIndex];
	Py[toIndex] = Py[fromIndex];

	Vx[toIndex] = Vx[fromIndex];
	Vy[toIndex] = Vy[fromIndex];

	Fx[toIndex] = Fx[fromIndex];
	Fy[toIndex] = Fy[fromIndex];

	Ax[toIndex] = Ax[fromIndex];
	Ay[toIndex] = Ay[fromIndex];

	//bFreeToMove[toIndex] = bFreeToMove[fromIndex];

	this[Name[fromIndex]]._name = Name[toIndex];

	// DO NOT NEED TO COPY SCALE OR COLOR BECAUSE THESE ARE
	//  MAINTAINED BY THE MOVIECLIP ITSELF
}
handleCollisionÿÿÿÿOÿÿÿÿÿ?ÿÿO1ÿÂ
function createBackup()
{
	_root.logMessage(".....backing up system", _root._logMgr._eMenuControls);
	this.numOfObjsBKUP = this.m_nInitObjCount;
	
	_numObjsToBackup  = this.m_nInitObjCount;
	this.NameBKUP = new Array(_numObjsToBackup);
	this.MassBKUP = new Array(_numObjsToBackup);

	this.PxBKUP = new Array(_numObjsToBackup);
	this.PyBKUP = new Array(_numObjsToBackup);

	this.VxBKUP = new Array(_numObjsToBackup);
	this.VyBKUP = new Array(_numObjsToBackup);

	this.RedBKUP	= new Array(_numObjsToBackup);
	this.GreenBKUP	= new Array(_numObjsToBackup);
	this.BlueBKUP	= new Array(_numObjsToBackup);

 	for(a=0; a<this.m_nInitObjCount; a++){ 
		this.NameBKUP[a]=this.Name[a];
		this.MassBKUP[a]=this.Mass[a];

		this.PxBKUP[a] = this.Px[a];
		this.PyBKUP[a] = this.Py[a];

		this.VxBKUP[a] = this.Vx[a];
		this.VyBKUP[a] = this.Vy[a];

		this.RedBKUP[a]		= this.Red[a];
		this.GreenBKUP[a]	= this.Green[a];
		this.BlueBKUP[a]	= this.Blue[a];
	}

}

function restore(){
	//trace(".......Restoring System");
	//trace ( "...System Info: " + systemInfo( this) );

	_root.logMessage("...Restoring System (In SystemModel)", _root._logMgr._eMenuControls);
	this.m_nInitObjCount = this.numOfObjsBKUP;
	this.m_nCurrObjCount = m_nInitObjCount;

	//trace ("..Number of Objects to Restore: " + this.numOfObjs);
	for(a=0; a<this.m_nInitObjCount; a++){
		
		this.Name[a]=this.NameBKUP[a];	
		this.Mass[a]=this.MassBKUP[a];	

		this.Px[a] = this.PxBKUP[a];
		this.Py[a] = this.PyBKUP[a];	

		this.Vx[a] = this.VxBKUP[a];	
		this.Vy[a] = this.VyBKUP[a];	

		this.Red[a]		= this.RedBKUP[a];
		this.Green[a]	= this.GreenBKUP[a];
		this.Blue[a]	= this.BlueBKUP[a];
	}

	this.m_nInitObjCount = 0;
	this.colLocX = new Array(numOfObjs);
	this.colLocY = new Array(numOfObjs);
	this.colName = new Array(numOfObjs);


	for(j=0; j<this.m_nInitObjCount; j++){
		this.colName[j] = getNumberedName ( this.m_sBaseCollisionName, j);
	}

}



function copyFromTo( p_nFromIndex, p_nToIndex){
	trace (" DEBUG ... Design Flaw. This function assumes that the arrays need to be ");
	trace ("           compacted at the time of collision.  Should just use a boolean,");
    trace ("           bIsActive to effectively remove an object from the system.  ");
	
	Mass[p_nToIndex]= Mass[p_nFromIndex];

	Px[p_nToIndex] = Px[p_nFromIndex];
	Py[p_nToIndex] = Py[p_nFromIndex];

	Vx[p_nToIndex] = Vx[p_nFromIndex];
	Vy[p_nToIndex] = Vy[p_nFromIndex];

	Fx[p_nToIndex] = Fx[p_nFromIndex];
	Fy[p_nToIndex] = Fy[p_nFromIndex];

	Ax[p_nToIndex] = Ax[p_nFromIndex];
	Ay[p_nToIndex] = Ay[p_nFromIndex];

	//bFreeToMove[toIndex] = bFreeToMove[fromIndex];

	this[Name[p_nFromIndex]]._name = Name[p_nToIndex];

	// DO NOT NEED TO COPY SCALE OR COLOR BECAUSE THESE ARE
	//  MAINTAINED BY THE MOVIECLIP ITSELF
}
backup/restoreÿÿÿÿÿÿOÿÿÿÿ?ÿÿ^ÿıfunction systemInfo()
{	
	l_retString = "\nSystem info...";	
	
	l_retString += "\nConstants...";
	l_retString += "\n..AU= " + this.AU;
	l_retString += "\n..G= "  + this.G;
	l_retString += "\n..Timescale= " + this.timeScale;


	l_retString += "\nObject Count...";
	l_retString += "\n..Curr Obj Count= " + this.m_nCurrObjCount;
	l_retString += "\n..Orig Obj Count= " + this.m_nInitObjCount;

	l_retString += "\nCollision Objects...";
	l_retString += "\n..count= " + this.m_collisionCount;
	for(j=0; j<this.m_collisionCount; j++)
	{
		l_retString += "\n..Name: " +this.colName[j];
		l_retString += "\t..Pos(" + this.colLocX[j];
		l_retString += ", " + this.colLocY[j];		
	}

	l_retString += "\nMass Objects...";
	l_retString += "\n..count= " + this.m_nCurrObjCount;
	for(k=0; k<this.m_nCurrObjCount; k++)
	{
		l_retString += "\n..Name: " + this.Name[k];
		l_retString += "\tMass: " + this.Mass[k];
		l_retString += "\tP(" + this.Px[k] + ", " + this.Py[k] + ")";
		l_retString += "\tV(" + this.Vx[k] + ", " + this.Vy[k] + ")";
		l_retString += "\tA(" + this.Ax[k] + ", " + this.Ay[k] + ")";
		l_retString += "\tF(" + this.Fx[k] + ", " + this.Fy[k] + ")";
		l_retString += "\tObjFree:" + this.bFreeToMove[k];
		//	this.Red[k] 	this.Green[k]	this.Blue[k]
	}
	
	l_retString += "\nBackup of Mass Objects...";
	l_retString += "\n...count= " + this.numOfObjsBKUP;
	for(k=0; k<this.m_nCurrObjCount; k++)
	{
		l_retString += "\n..Name: " + this.NameBKUP[k];
		l_retString += "\tMass: " + this.MassBKUP[k];
		l_retString += "\tP(" + this.PxBKUP[k] + ", " + this.PyBKUP[k] + ")";
		l_retString += "\tV(" + this.VxBKUP[k] + ", " + this.VxBKUP[k] + ")";
			
		l_retString += "\tObjFree:" + "NOT BACKED UP!!"; //this.bFreeToMove[k];
		//	this.Red[k] 	this.Green[k]	this.Blue[k]
	}
	return l_retString;
}




systemInfoÿÿÿÿÿOÿÿÿÿÿ?ÿÿòMÿ÷function stepMotion(){
	//l_startTime = new Date();
	//trace("System NOT paused");
	//trace(new Date());
	
	//trace(new Date());
	//ASSERT NOT PAUSED SO CONTINUE MOVING OBJECTS
	
	xCenterMass = 0;
	yCenterMass = 0;
	//nTotalSystemMass = 0;

	//FIND NEW POSITIONS
	for (i=0; i<m_nCurrObjCount; i++){
		if ( bFreeToMove[i] )
		{
			//_root.logMessage("..Calculating Pos for unpinned obj#: " + i);
			Px[i] += Vx[i]/timescale;
			Py[i] += Vy[i]/timescale;
		}

		//xCenterMass += 	Px[i] * Mass[i];
		//yCenterMass += 	Py[i] * Mass[i];	
		//nTotalSystemMass += Mass[i];
	}

	//xCenterMass = xCenterMass / nTotalSystemMass;
	//yCenterMass = xCenterMass / nTotalSystemMass;


	//SET THE OFFSET BASED ON THE SELECTED OBJECT
	xOffset =0;// -xCenterMass; // -Px[selectedObj];
	yOffset =0;// -yCenterMass; //-Py[selectedObj];

	/*convertedX = _parent.convertX(this,xCenterMass);
	convertedY = _parent.convertY(this,yCenterMass);
	_centMassMarker._x = convertedX;
	_centMassMarker._y = convertedY;*/

	//ZERO OUT THE FORCE VECTOR FOR EACH OBJECT
	/*for (j=0; j<numOfObjs; j++){	
		Fx[j] = 0;
		Fy[j] = 0;
	}*/

	//CALCULATE FORCES ON OBJECTS
	for (i=0; i<m_nCurrObjCount; i++){	
		for(k=i+1; k<m_nCurrObjCount; k++){
			 
			deltaX = Px[k] - Px[i];
			deltaY = Py[k] - Py[i];
			 
			distSquared = deltaX*deltaX + deltaY*deltaY;			
			distance = Math.sqrt( distSquared );

			//CHECK FOR COLLISIONS		
			if(distance < nCollisionThreshold){				
				//BALLS COLLIDED AND COALESCE INTO ONE BALL	
				//_root.logMessage("Distance="+distance);
				trace ("\nCollision occurred...");
				handleCollision(i,k);

				if ( 1 == 1)
				{
					//xNewColToFadeOut = this[colName[collisionCount-1]];
					_root.logMessage("New Collision To Fade Out="+xNewColToFadeOut._name,
							 _root._logMgr._eCollisionEvent);
					//colFadeOutQueue.push( xNewColToFadeOut  );
				}			
	

				// DECREMENT THE INNER FOR LOOP INDEX
				// BECAUSE OBJECT K WAS REMOVED AND THE
				// LAST OBJECT WAS PUT IN ITS PLACE
				// ...NEED TO CALC GRAVITY BTW. i AND k AGAIN
				// SINCE numOfObjs IS ONE DECREMENTED AS WELL
				// ..IF k WAS THE LAST OBJECT, THE k WILL BE
				// EQUAL TO numOfObjs AND THUS THE FOR LOOP
				// WILL BE COMPLETED
				k--;
				//paused = true;
				continue;			

			}		

			// CALCULATE GRAVITATIONAL FORCE BETWEEN TWO OBJECTS					
			//     F = G x ( Mass1 x Mass2 ) /  ( distance ^ 2 )
			//Fmag = G * Mass[i] * Mass[k] / (distance*distance);
			GravFactor = G / distSquared;
		
			Accel_i = GravFactor * Mass[k];
			Accel_k = GravFactor * Mass[i];

			sinTheta = deltaY / distance;
			cosTheta = deltaX / distance;

			Vx[i] += Accel_i * cosTheta / timescale;
			Vy[i] += Accel_i * sinTheta / timescale;

			Vx[k] -= Accel_k * cosTheta / timescale;
			Vy[k] -= Accel_k * sinTheta / timescale;
			
		}
	}
/*
	
	currTime = new Date();
	elapsedTimeInMillis = currTime.getTime() - l_startTime.getTime();
	fps = Math.round (1 / ( elapsedTimeInMillis / 1000 ) );
	//_parent._parent._fpsDisplay = "" + fps + " fps"
	_parent._parent._fpsDisplay = "ms:" + elapsedTimeInMillis ;*/

}

stepMotionÿÿÿÿÿÿÿÿ?ÿÿDIÿtfunction stepMotion2(){
// ORIGINAL 


	l_startTime = new Date();
	//trace("System NOT paused");
	//trace(new Date());
	
	//trace(new Date());
	//ASSERT NOT PAUSED SO CONTINUE MOVING OBJECTS

	//FIND NEW POSITIONS
	for (i=0; i<numOfObjs; i++){
		if ( bFreeToMove[i] ){
			//_root.logMessage("..Calculating Pos for unpinned obj#: " + i);
			Px[i] += Vx[i]/timescale;
			Py[i] += Vy[i]/timescale;
		}

		//xCenterMass += 	Px[i] * Mass[i];
		//yCenterMass += 	Py[i] * Mass[i];	
		//nTotalSystemMass += Mass[i];
	}

//	xCenterMass = xCenterMass / nTotalSystemMass;
	//yCenterMass = xCenterMass / nTotalSystemMass;


	//SET THE OFFSET BASED ON THE SELECTED OBJECT
//	xOffset = -xCenterMass; // -Px[selectedObj];
//	yOffset = -yCenterMass; //-Py[selectedObj];

	centerMass();

	//MOVE THE OBJECTS
	for (i=0; i<numOfObjs; i++){
		if ( bFreeToMove[i] ){
			//_root.logMessage("..Calculating Conv Pos for unpinned obj#: " + i);
			convertedX = _parent.convertX(this,Px[i]);
			convertedY = _parent.convertY(this,Py[i]);
	
			this[Name[i]]._x = convertedX;
			this[Name[i]]._y = convertedY;
		}
		//trace("New position= "+newX +","+newY);

		//_root.logMessage ("..Moving Ball["+i+"] to: ("+newX+", " + newY+")");
		//trace("Actual position= "+Px[i] +","+Py[i]);
		//trace("Conv'd position= "+_parent[Name[i]]._x +","+_parent[Name[i]]._y);
		//currBall._x = currBall._x + currBall.V[0]/timeScale;
		//currBall._y = currBall._y + currBall.V[1]/timeScale;
	}

	//ZERO OUT THE FORCE VECTOR FOR EACH OBJECT
	for (j=0; j<numOfObjs; j++){	
		Fx[j] = 0;
		Fy[j] = 0;
	}

	//CALCULATE FORCES ON OBJECTS
	for (i=0; i<numOfObjs; i++){	
		for(k=i+1; k<numOfObjs; k++){
			 
			deltaX = Px[k] - Px[i];
			deltaY = Py[k] - Py[i];

			distance = Math.abs( Math.sqrt(deltaX*deltaX 
							+ deltaY*deltaY) );
			//CHECK FOR COLLISIONS		
			if(Math.abs(distance) < nCollisionThreshold){
				
				//BALLS COLLIDED AND COALESCE INTO ONE BALL	
				//_root.logMessage("Distance="+distance);
				collision(i,k);
				_parent.coverLatestCollision(this);

				// DECREMENT THE INNER FOR LOOP INDEX
				// BECAUSE OBJECT K WAS REMOVED AND THE
				// LAST OBJECT WAS PUT IN ITS PLACE
				// ...NEED TO CALC GRAVITY BTW. i AND k AGAIN
				// SINCE numOfObjs IS ONE DECREMENTED AS WELL
				// ..IF k WAS THE LAST OBJECT, THE k WILL BE
				// EQUAL TO numOfObjs AND THUS THE FOR LOOP
				// WILL BE COMPLETED
				k--;
				//paused = true;
				continue;			

			}		

			// CALCULATE GRAVITATIONAL FORCE BETWEEN TWO OBJECTS					
			//     F = G x ( Mass1 x Mass2 ) /  ( distance ^ 2 )
			Fmag = G * Mass[i] * Mass[k] / (distance*distance);

			//...THEN MULTIPLE Fmag by THE SINE and COSINE
			xForce = Fmag * deltaX/distance;
			yForce = Fmag * deltaY/distance;
			
			Fx[i] += xForce;
			Fy[i] += yForce;
			
			Fx[k] -= xForce;
			Fy[k] -= yForce;	
		}
	}

	//CALCULATE ACCELERATIONS OF OBJECTS
	for (i=0; i<numOfObjs; i++){
		if ( bFreeToMove[i] ){
			//_root.logMessage("..Calculating Aceel for unpinned obj#: " + i);
			Ax[i] = Fx[i] / Mass[i];
			Ay[i] = Fy[i] / Mass[i];
		}
		//trace("Obj["+i+"], accel="+Ax[i]+","+Ax[i]);
	}	

	//CHANGE VELOCITIES
	for (i=0; i<numOfObjs; i++){
		if ( bFreeToMove[i] ) {
			//_root.logMessage("..Calculating Velo for unpinned obj#: " + i);
			Vx[i] += Ax[i]/timescale;
			Vy[i] += Ay[i]/timescale;
		}
	}


	currTime = new Date();
	elapsedTimeInMillis = currTime.getTime() - l_startTime.getTime();
	//fps = Math.round (1 / ( elapsedTimeInMillis / 1000 ) );
	//_parent._parent._fpsDisplay = "" + fps + " fps"
	_parent._parent._fpsDisplay = "" + elapsedTimeInMillis;

}
old_stepMotionÿÿÿÿOÿÿÿÿÿÿ?ÿÿ@.ÿ¢function initializeData( p_nObjectCount ){
	_root.logMessage("\nInitializing System Model", _root._logMgr._eInitialization, _root._logMgr._eSystemGeneration);
	_root.logMessage("....Named:" + this, _root._logMgr._eInitialization, _root._logMgr._eSystemGeneration);
	_root.logMessage("....Object Count:" + p_nObjectCount, _root._logMgr._eSystemGeneration);


	// Model Parameters	
	this.AU					 = 1.5 * Math.pow(10,11);	// Astronomical Unit = 1.5e11 in meters
	this.G 					 = 6.67* Math.pow(10,-11);	// Gravitational Constant
	this.timeScale 			 = 0.00000015;				// This is really 1/T, where T is secs per step
	this.nCollisionThreshold = 5 * Math.pow(10,10);		// This is to handle FEA issues of poor step size														//   

	//SETS THE NUMBER OF OBJECTS IN THE SYSTEM
	this.m_nInitObjCount = p_nObjectCount;
	this.m_nCurrObjCount = m_nInitObjCount;

	// CREATE THE ARRAYS THAT WILL BE USED
	// TO TRACK THE COLLISIONS
	this.m_sBaseCollisionName =  "Collision";
	this.m_collisionCount = 0;
	this.colLocX = new Array(m_nInitObjCount);
	this.colLocY = new Array(m_nInitObjCount);
	this.colName = new Array(m_nInitObjCount);
	this.colSize = new Array(m_nInitObjCount);

	// INITIALIZE THE ARRAYS THAT WILL BE USED
	// TO TRACK THE COLLISIONS
	for(j=0; j<m_nInitObjCount; j++){		
		this.colName[j] = getNumberedName ( this.m_sBaseCollisionName, j);
		this.colLocX[j] = 0;
		this.colLocY[j] = 0;
		this.colSize[j] = 0;
	}
	
	//INITIALIZE THE INFO ARRAYS THAT WILL BE USED TO
	// TRACK PARAMETERS DESCRIBING SELECTED OBJECT
	this.m_sBaseObjectName =  "Object";

	this.Name = new Array(this.m_nInitObjCount);
	this.Mass = new Array(this.m_nInitObjCount);

	this.Px = new Array(this.m_nInitObjCount);
	this.Py = new Array(this.m_nInitObjCount);

	this.Vx = new Array(this.m_nInitObjCount);
	this.Vy = new Array(this.m_nInitObjCount);

	this.Fx = new Array(this.m_nInitObjCount);
	this.Fy = new Array(this.m_nInitObjCount);

	this.Ax = new Array(this.m_nInitObjCount);
	this.Ay = new Array(this.m_nInitObjCount);

	this.Red = new Array(this.m_nInitObjCount);
	this.Green = new Array(this.m_nInitObjCount);
	this.Blue = new Array(this.m_nInitObjCount);

	this.bFreeToMove = new Array(this.m_nInitObjCount);

	//Clear out the arrays describing the objects
	// TODO : Switch logic of bFreeToMove to bIsPinnedDown 
	//        so that default 0 allows for motion
	for(a=0; a<m_nInitObjCount; a++){
		this.Name[a]	= getNumberedName ( this.m_sBaseObjectName, a);
		this.Mass[a]	= 0.0;

		this.Px[a]    	= 0.0;
		this.Py[a]		= 0.0;

		this.Vx[a]		= 0.0;
		this.Vy[a]		= 0.0;

		this.Fx[a]		= 0.0;
		this.Fy[a]		= 0.0;

		this.Ax[a]		= 0.0;
		this.Ay[a]		= 0.0;	

		this.bFreeToMove[a] = true;
	}
	_root.logMessage("...ModelData Cleared out:" + systemInfo() , _root._logMgr._eInitialization);

 
	//_root.logMessage ( "..Checking for extra objects..." );
	//_root.logMessage ( "....PrevObjCount: " + this.prevTotalObjects);
	//_root.logMessage ( "....totalobjects: " + this.totalObjects);
}

initializeDataÿÿÿÿÿOOÿÿÿÿÿCPicText	((R
8ArialÌÿ"(SettingsControllerÿÿÿ?ÿÿ6k
Layer 1Oÿÿÿÿÿ?ÿÿe‘function displaySettings()
{	
	trace ("Answering Display Settings Request...");
	_parent._settingsMenu.displaySettings (_parent._settingsData);
}
menuApiÿÿÿÿOÿÿÿÿÿÿ?ÿÿı\ÿŞfunction generateNewModelData(p_sysModel){
	_root.logMessage ("\nGenerating New Model Data", _root._logMgr._eSystemGeneration);
		
	xCfg 			= _parent._settingsData;
	l_nType 		= xCfg.m_nType;
	l_nObjectCount 	= xCfg.m_nObjectCount;

	_root.logMessage ("...Current Settings: " + xCfg.settingsInfo(),  _root._logMgr._eSystemGeneration);
	p_sysModel.initializeData (l_nObjectCount);

	if (xCfg._eTypeSingle == l_nType){
		generateSingleSystem(p_sysModel);

	}else if (xCfg._eTypeBinary == l_nType){
		generateBinarySystem(p_sysModel);

	}else if (xCfg._eTypeSpiral == l_nType){
		generateSpiralSystem(p_sysModel);

	}else if (xCfg._eTypeRings == l_nType){
		setupRings(p_sysModel);

	}else if (xCfg._eTypeGrid == l_nType){
		setupGrid(p_sysModel);

	}else{
		_root.logMessage ("No match found for type: " + l_nType, _root._logMgr._eSystemGeneration);
	}

	
	_root.logMessage ("...New Model Data: " + p_sysModel.systemInfo(),  _root._logMgr._eSystemGeneration);
}
generateNewModelDataOÿOÿÿÿÿ?ÿÿ>ÿfunction generateSingleSystem(p_systemModel){
	/*
	  @ THIS CREATES A SYSTEM WITH A LARGE OBJECT -SUN-  
		 IN THE CENTER AND WITH PLANETS RANGING FROM 1E-6 
		 TO 1E-3 THE MASS OF LARGE OBJECT.
	  @ IT ALSO RANDOMLY PLACES THE OTHER OBJECTS BUT CALCULATES
	     THE INDIVIDUAL VELOCITIES NECESSARY FOR THE OBJECTS TO 
	     ORBIT THE SUN
	*/		

	xCfg 			= _parent._settingsData;
	l_nObjectCount 	= xCfg.m_nObjectCount;

	_root.logMessage("\nRunning basic Setup",  _root._logMgr._eSystemGeneration);
	_root.logMessage("...Num Objs in System: " + l_nObjectCount,  _root._logMgr._eSystemGeneration);

	if ( 1 > l_nObjectCount )
	{
		_root.logMessage(".....Invalid number of objects, halting generation",  _root._logMgr._eSystemGeneration);
	}else if (l_nObjectCount != p_systemModel.m_nCurrObjCount) 
	{
		_root.logMessage(".....Inconsistent number of objects, halting generation",  _root._logMgr._eSystemGeneration);
	}

	//SET THE MASS OF THE SUN
	p_systemModel.Mass[0] = 1.989*Math.pow(10,30);
		
	//p_systemModel[p_systemModel.Name[0]]._xScale = 200;
	//p_systemModel[p_systemModel.Name[0]]._yScale = p_systemModel[p_systemModel.Name[0]]._xScale;
	p_systemModel.Red[0] 	= 230;
	p_systemModel.Green[0]	= 230;
	p_systemModel.Blue[0] 	= 0;
	
	//RANDOMLY SET THE MASSES OF THE REMAINING OBJECTS
	for(i=1; i<l_nObjectCount; i++){
		power =  23+ random(3);
		nBase = 1+random(400);
		
		p_systemModel.Mass[i] =  nBase * Math.pow(10,power);
		//	_root.logMessage("Running Spiral Setup");("number="+number+", mass="+p_systemModel.Mass[i]);  //GOOD
	}

	//SET THE WHETHER OR NOT AN OBJECT IS ALLOWED TO MOVE
	for(i=0; i<l_nObjectCount; i++){	
		if( i%2 == 1 ){
			//_root.logMessage ("..Pinning Object Down, object#: " + i);
			//p_systemModel.bFreeToMove[i]=false;
		}
	}

	//SET THE COLORS OF THE OBJECTS
	for(i=1; i<l_nObjectCount; i++){
		nameOfcurrObject = p_systemModel.Name[i];
		redVal = 180; //random(255);
		greenVal = 180; //random(255);
		blueVal = 0; //random(255);

		p_systemModel.Red[i] = redVal;
		p_systemModel.Green[i] = greenVal;
		p_systemModel.Blue[i] = blueVal;
		//	_root.logMessage("Running Spiral Setup");("Saving color["+i+"]:"+p_systemModel.Red[i]
		//		+", "+p_systemModel.Green[i]+", "+p_systemModel.Blue[i])
	}
	
	//SET THE POSITION OF THE SUN TO THE CENTER OF THE VIEW
	p_systemModel.Px[0] = 0.0;
	p_systemModel.Py[0] = 0.0;
	
	//RANDOMLY SET THE POSITION OF THE REMAINING OBJECTS
	for(j=1; j<l_nObjectCount; j++){
		radius =  1 +random(10) + Math.random();
		rotation = random(360);
		
		//radius = 2+j*.85;
		//rotation = 50+10*j;//j*-18;

		xInAUs = radius * Math.cos(rotation*Math.PI/180);
		yInAUs = radius * Math.sin(rotation*Math.PI/180);
		p_systemModel.Px[j] = xInAUs * p_systemModel.AU;
		p_systemModel.Py[j] = yInAUs * p_systemModel.AU;
	}	

	//cALCULATE AND ASSIGN THE ORBITAL VELOCITIES OF OBJECTS
	for(k=1; k<l_nObjectCount; k++){
		deltaX=  p_systemModel.Px[k] - p_systemModel.Px[0];
		deltaY=  p_systemModel.Py[k] - p_systemModel.Py[0];
		
		if ( deltaX   != p_systemModel.Px[k])
		{
			trace ( " TRACE:   ROUNDING ERROR");
			trace ( "      deltaX = " + deltaX + ", Px["+k+"] = " + p_systemModel.Px[k] );
		}

		distance = Math.abs( Math.sqrt(deltaX*deltaX 
							+ deltaY*deltaY) );

		velocityMag = Math.sqrt(p_systemModel.G * p_systemModel.Mass[0] / distance);
		

		//'VelocityMag' IS MULTI. BY NEG. RECIPROCAL OF SLOPE
		//_root.logMessage("Running Spiral Setup");((k % 2)*2-1);
		p_systemModel.Vx[k]= velocityMag * deltaY / distance ;// *((k % 2)*2-1);
		p_systemModel.Vy[k]= velocityMag * deltaX / distance * -1;// *((k % 2)*2-1);		
	}
}
generateSingleSystemÿÿOÿÿÿÿ?ÿÿIÿcfunction generateBinarySystem(p_systemModel){
	/*
	  @ THIS CREATES A SYSTEM WITH TWO LARGE OBJECTS  
	*/		
	_root.logMessage("\nRunning binary Setup",  _root._logMgr._eSysSetup);
	_root.logMessage("....Num Objs in System: " + p_systemModel.numofObjs,  _root._logMgr._eSysSetup);
	//l_sBrainToStr = p-*/+_system._parent.systemInfo( p_systemModel);
	//_root.logMessage("..Brain String: " + l_sBrainToStr );
	

	//SET THE MASS OF THE BINARY STARS
	p_systemModel.Mass[0] = 2*Math.pow(10,30);
	nMassRatio = 1;
	p_systemModel.Mass[1] = p_systemModel.Mass[0] * nMassRatio;
		
	//p_systemModel[p_systemModel.Name[0]]._xScale = 200;
	//p_systemModel[p_systemModel.Name[0]]._yScale = p_systemModel[p_systemModel.Name[0]]._xScale;
	p_systemModel.Red[0] = 190;
	p_systemModel.Green[0] = 50;
	p_systemModel.Blue[0] = 0;

	p_systemModel.Red[1] = 50;
	p_systemModel.Green[1] = 0;
	p_systemModel.Blue[1] = 190;
	_parent.setObjectColor(p_systemModel[p_systemModel.Name[1]],
										p_systemModel.Red[1],
										p_systemModel.Green[1],
										p_systemModel.Blue[1]);

	//RANDOMLY SET THE MASSES OF THE REMAINING OBJECTS
	for(i=2; i<p_systemModel.numOfObjs; i++){
		power =  23+ random(3);
		nBase = 1+random(400);
		
		p_systemModel.Mass[i] =  nBase * Math.pow(10,power);
	}

	//SET THE COLORS OF THE OBJECTS
	for(i=2; i<p_systemModel.numOfObjs; i++){
		nameOfcurrObject = p_systemModel.Name[i];
		redVal = 0; //random(255);
		greenVal = 0; //random(255);
		blueVal = 0; //random(255);

		p_systemModel.Red[i] = redVal;
		p_systemModel.Green[i] = greenVal;
		p_systemModel.Blue[i] = blueVal;
	}
	
	//SET THE POSITION OF THE SUN TO THE CENTER OF THE VIEW
	p_systemModel.Px[0] = 15.0*p_systemModel.AU;
	p_systemModel.Py[0] = 0.0;

	p_systemModel.Px[1] = -15.0*p_systemModel.AU;
	p_systemModel.Py[1] = 0.0;

	// TODO : Handle more general case to calc. initial velociites.
	p_systemModel.Vx[0] = 0;
	p_systemModel.Vy[0] = 1 * Math.sqrt(p_systemModel.G * 0.25 * p_systemModel.Mass[0]/Math.abs(p_systemModel.Px[0]));

	p_systemModel.Vx[1] = 0;
	p_systemModel.Vy[1] = -1 * Math.sqrt(p_systemModel.G * 0.25 * p_systemModel.Mass[0]/Math.abs(p_systemModel.Px[0]));

	binaryDiameter = 30;
	
	p_systemModel.centerMass();
	
	//RANDOMLY SET THE POSITION OF THE REMAINING OBJECTS
	for(j=2; j<p_systemModel.numOfObjs; j++){

		posType = random (4);
		trace ("Position type: " + posType);		
		if(0 == posType){
			//ORBIT MASS[0]
			trace ("..Object ["+j+"] put in orbit around Mass[0]");
			radius = 2 + Math.random()*binaryDiameter/3;
			rotation = random(360);
			xInAUs = 15 + radius * Math.cos(rotation*Math.PI/180);
			yInAUs = 0 + radius * Math.sin(rotation*Math.PI/180);

			p_systemModel.Px[j] = xInAUs * p_systemModel.AU;
			p_systemModel.Py[j] = yInAUs * p_systemModel.AU;


			deltaX= p_systemModel.Px[0] - p_systemModel.Px[j];
			deltaY= p_systemModel.Py[0] - p_systemModel.Py[j];

			distance = Math.abs( Math.sqrt(deltaX*deltaX 
							+ deltaY*deltaY) );
		
			velocityMag = Math.sqrt(p_systemModel.G * p_systemModel.Mass[0] / distance);
		
			p_systemModel.Vx[j]= velocityMag * deltaY / distance * -1;
			p_systemModel.Vy[j]= velocityMag * deltaX / distance ;

		}else if (1 == posType){

			trace ("..Object ["+j+"] put in orbit around Mass[1]");
			//ORBIT MASS[1]
			radius = 2 + Math.random()*binaryDiameter/3;
			rotation = random(360);
			xInAUs = -15 + radius * Math.cos(rotation*Math.PI/180);
			yInAUs = 0 + radius * Math.sin(rotation*Math.PI/180);

			p_systemModel.Px[j] = xInAUs * p_systemModel.AU;
			p_systemModel.Py[j] = yInAUs * p_systemModel.AU;


			deltaX= p_systemModel.Px[1] - p_systemModel.Px[j];
			deltaY= p_systemModel.Py[1] - p_systemModel.Py[j];

			distance = Math.abs( Math.sqrt(deltaX*deltaX 
							+ deltaY*deltaY) );
		
			velocityMag = Math.sqrt(p_systemModel.G * p_systemModel.Mass[1] / distance);
		
			p_systemModel.Vx[j]= velocityMag * deltaY / distance ;
			p_systemModel.Vy[j]= velocityMag * deltaX / distance * -1;

		}else if (2 == posType || 3 == posType){
			trace ("..Object ["+j+"] put in	outer orbit around Center of Mass");
			//ORBIT CENTER MASS
			radius = binaryDiameter + random(binaryDiameter);
			rotation = random(360);
			xInAUs = radius * Math.cos(rotation*Math.PI/180);
			yInAUs = radius * Math.sin(rotation*Math.PI/180);

			p_systemModel.Px[j] = xInAUs * p_systemModel.AU;
			p_systemModel.Py[j] = yInAUs * p_systemModel.AU;


			deltaX= p_systemModel.Px[j];
			deltaY= p_systemModel.Py[j];

			distance = Math.abs( Math.sqrt(deltaX*deltaX 
							+ deltaY*deltaY) );
		
			//SHORT CUT... should add the masses at the very least
			velocityMag = Math.sqrt(p_systemModel.G * (p_systemModel.Mass[0] *2)/ distance);
		
			p_systemModel.Vx[j]= velocityMag * deltaY / distance * -1;
			p_systemModel.Vy[j]= velocityMag * deltaX / distance;

		}		
	}


	// PLACE ALL OF THE OBJECTS ON THE DISPLAY AREA
	for(k=0; k<p_systemModel.numOfObjs; k++){
		currObject = p_systemModel.Name[k];
		//_root.logMessage ("MOving Object: " + p_systemModel[currObject]._name ,  _root._logMgr._eSysSetup);
		//_root.logMessage ("...current position: (" + p_systemModel[currObject]._x +", " + p_systemModel[currObject]._y+")",  _root._logMgr._eSysSetup);
			
		p_systemModel[currObject]._x = p_systemModel._parent.convertX(p_systemModel,p_systemModel.Px[k]);
		p_systemModel[currObject]._y = p_systemModel._parent.convertY(p_systemModel,p_systemModel.Py[k]);
		//_root.logMessage ("...New position: (" + p_systemModel[currObject]._x +", " + p_systemModel[currObject]._y+")",  _root._logMgr._eSysSetup);		
		//_root.logMessage("Converted (" +p_systemModel.Px[k]+","+p_systemModel.Py[k]+") to ("
		//		 +p_systemModel[currObject]._x+","+p_systemModel[currObject]._y+")" ,  _root._logMgr._eSysSetup); 
	}

}
generateBinarySystem™3Ìÿÿÿÿ?ÿÿ2_ÿîfunction generateSpiralSystem(p_system){

	_root.logMessage("\nRunning Spiral System Setup",  _root._logMgr._eSysSetup);
	_root.logMessage("....Num Objs in System: " + p_system.numofObjs,  _root._logMgr._eSysSetup);
	//l_sBrainToStr = p-*/+_system._parent.systemInfo( p_system);
	//_root.logMessage("..Brain String: " + l_sBrainToStr );
				
	//RANDOMLY SET THE MASSES OF THE REMAINING OBJECTS
	for(i=0; i<p_system.numOfObjs; i++){
		power =  23+ random(3);
		nBase = 1+random(400);
		
		p_system.Mass[i] =  nBase * Math.pow(10,power);
		//	_root.logMessage("Running Spiral Setup");("number="+number+", mass="+p_system.Mass[i]);  //GOOD
	}

	//SET THE WHETHER OR NOT AN OBJECT IS ALLOWED TO MOVE
	for(i=0; i<p_system.numOfObjs; i++){	
		if( i%2 == 1 ){
			//_root.logMessage ("..Pinning Object Down, object#: " + i);
			//p_system.bFreeToMove[i]=false;
		}
	}

	//SET THE COLORS OF THE OBJECTS
	for(i=0; i<p_system.numOfObjs; i++){
		nameOfcurrObject = p_system.Name[i];
		redVal = random(255);
		greenVal = random(255);
		blueVal = random(255);

		p_system.Red[i] = redVal;
		p_system.Green[i] = greenVal;
		p_system.Blue[i] = blueVal;
	}
	
	//SET THE POSITION OF THE SUN TO THE CENTER OF THE VIEW
	p_system.Px[0] = 0.0;
	p_system.Py[0] = 0.0;
	
	//RANDOMLY SET THE POSITION OF THE REMAINING OBJECTS
	for(j=0; j<p_system.numOfObjs; j++){
		radius = (5+j)%( p_system.numOfObjs/ 4);
		rotation = 15*j;
		
		//radius = 2+j*.85;
		//rotation = 50+10*j;//j*-18;

		xInAUs = radius * Math.cos(rotation*Math.PI/180);
		yInAUs = radius * Math.sin(rotation*Math.PI/180);
		p_system.Px[j] = xInAUs * p_system.AU;
		p_system.Py[j] = yInAUs * p_system.AU;
	}	

	//cALCULATE AND ASSIGN THE ORBITAL VELOCITIES OF OBJECTS
	/*for(k=1; k<p_system.numOfObjs; k++){
		deltaX= p_system.Px[0] - p_system.Px[k];
		deltaY= p_system.Py[0] - p_system.Py[k];

		distance = Math.abs( Math.sqrt(deltaX*deltaX 
							+ deltaY*deltaY) );

		velocityMag = Math.sqrt(p_system.G * p_system.Mass[0] / distance);
		

		//'VelocityMag' IS MULTI. BY NEG. RECIPROCAL OF SLOPE
		//_root.logMessage("Running Spiral Setup");((k % 2)*2-1);
		p_system.Vx[k]= velocityMag * deltaY / distance ;// *((k % 2)*2-1);
		p_system.Vy[k]= velocityMag * deltaX / distance * -1;// *((k % 2)*2-1);
	}*/

	p_system.centerMass();

	for(k=0; k<p_system.numOfObjs; k++){
		currObject = p_system.Name[k];
		_root.logMessage ("MOving Object: " + p_system[currObject]._name ,  _root._logMgr._eSysSetup);
		_root.logMessage ("...current position: (" + p_system[currObject]._x +", " + p_system[currObject]._y+")",  _root._logMgr._eSysSetup);
			
		p_system[currObject]._x = p_system._parent.convertX(p_system,p_system.Px[k]);
		p_system[currObject]._y = p_system._parent.convertY(p_system,p_system.Py[k]);
		_root.logMessage ("...New position: (" + p_system[currObject]._x +", " + p_system[currObject]._y+")",  _root._logMgr._eSysSetup);
		
		 _root.logMessage("Converted (" +p_system.Px[k]+","+p_system.Py[k]+") to ("
				 +p_system[currObject]._x+","+p_system[currObject]._y+")" ,  _root._logMgr._eSysSetup); 
	}

}
generateSpiralSystemÿOOÿArialÌÿ"(SettingsDataÿÿÿ?ÿÿ@Kÿ$function settingsInfo()
{
	l_retString = "\nSettings Data: ";

	l_retString += "\n  Types...";
	l_retString += "\n    _eTypeSingle:  " + _eTypeSingle;
	l_retString += "\n    _eTypeBinary:  " + _eTypeBinary;
	l_retString += "\n    _eTypeSpiral:  " + _eTypeSpiral;
	l_retString += "\n    _eTypeRings:   " + _eTypeRings;
	l_retString += "\n    _eTypeGrid:    " + _eTypeGrid;
	l_retString += "\n    _eTypeCustom:  " + _eTypeCustom;



	l_retString += "\n  ModelSettings...";
	l_retString += "\n    Current Type:    " + m_nType;
	l_retString += "\n    Object Count:    " + m_nObjectCount;
	


	l_retString += "\n  DisplaySettings...";
	l_retString += "\n    Show Collisions  " + bShowCollisions;
	l_retString += "\n    Fade out steps   " + nNumColFadeOutSteps;

	return l_retString;
}
settingsInfoÿÿÿÿOÿÿÿÿÿ?ÿÿUÅfunction setObjectCount( p_nNewObjectCount)
{
	trace ("Setting object count to: " + p_nNewObjectCount );
	m_nObjectCount = p_nNewObjectCount;
}
function getObjectCount()
{
	return m_nObjectCount;
}
set/get ObjectCountÿÿÿÿÿOOÿÿÿÿ?ÿÿàvŒfunction setType( p_nNewType)
{
	trace ("Setting type to: " + p_nNewType );
	m_nType = p_nNewType;
}
function getType()
{
	return m_nType;
}
set/get TypeÿÿÿÿOÿOÿÿÿÿÿCPicText	((^8ArialÌÿ"(History Viewer_labelÿÿÿ?ÿÿP#
Layer 1ÿÿÿÿOÿÿÿÿÿÿCPicText	((
8TextField42ArialÌÿ"(HistoryControllerÿÿÿ?ÿÿ 
Layer 1ÿÿÿÿOÿÿÿÿÿÿCPicText	((Õ8TextField44ArialÌÿ"(HistoryModelÿÿÿ?ÿÿ®V
Layer 1ÿÿÿÿOÿÿÿÿÿÿ	CPicShaÿÿÿÿ
CPicSpriteäÿÿ’åÿÿ
ëÿäÿÿ’åÿÿÿÿÿÿÛ{onClipEvent ( load )
{	
	_root.logMessage("...Loading History Model", _root._logMgr._eLoadOrder);
	this._visible = false;
}_historyModeleäÿÿâÿÿ
ëÿeäÿÿâÿÿÿÿÿÿ2onClipEvent ( load )
{	
	_root.logMessage("...Loading History Controller", _root._logMgr._eLoadOrder);
	this._visible = false;
}_historyMgräÿÿ¬èÿÿ
Üÿëÿäÿÿ¬èÿÿÿÿÿÿšu“onClipEvent ( load )
{	
	_root.logMessage("...Loading History Viewer", _root._logMgr._eLoadOrder);
	_label.text = "";
	_label.selectable = false;
}_historyViewer{ñÿÿgåÿÿ
'{ñÿÿgåÿÿÿÿÿÿî"ÿwonClipEvent(load){

	_root.logMessage("...Loading Settings Data", _root._logMgr._eLoadOrder);

	_eTypeSingle = 1;
	_eTypeBinary = 2;
	_eTypeSpiral = 3;
	_eTypeRings  = 4;
    _eTypeGrid   = 5;
    _eTypeCustom = 6;

	// Set up the default settings
	m_nObjectCount = 10;

	m_nType = _eTypeSingle;

	bShowCollisions = true;
	nNumColFadeOutSteps = 10;

	this._visible = false;
}_settingsDataƒñÿÿ<âÿÿ
ƒñÿÿ<âÿÿÿÿÿÿxXonClipEvent ( load )
{	
	_root.logMessage("...Loading Settings Controller", _root._logMgr._eLoadOrder);
	this._visible = false;
}_settingsMgr˜ÿÿÿèäÿÿ
Åÿ˜ÿÿÿèäÿÿÿÿÿÿö;.onClipEvent(load)
{
	this._visible = false;	
}	_sysModelğÿÿÿ
ğÿÿÿÿÿÿÿfÿonClipEvent(load){

	_root.logMessage("...Loading System Viewer", _root._logMgr._eLoadOrder);

	// Misc Flash Movie information
	m_nStageFPS		= 12;
	m_xSysEnv 		= _parent;
	m_xSysMgr		= m_xSysEnv._sysMgr;
	m_xSettings 	= m_xSysEnv._settings;

	//USED TO TRANSLATE THE POSITIONS OF OBJECTS TO 
	// COORDINATES IN THE VIEWABLE AREA
	m_nDisplayWidth		= 700;
	m_nDisplayHeight	= 500;

	// Level Offsets
	m_nDepthOffsetCollisions = 100;
	m_nDepthOffsetObjects    = 500;
	

	// Zoom Parameters
	m_nZoomDefault 			= 20.0;
	m_nZoomSecondsPer		= 0.5; 
	m_nZoomNumSteps 		= m_nStageFPS * m_nZoomSecondsPer;
	m_nZoomCurFactor 		= m_nZoomDefault;
	m_nZoomNewFactor		= m_nZoomCurFactor;
	m_nTempStepScale		= 0;
	m_nEndScale				= 100;
	m_nZoomStepCounter		= 0;
	m_bSystemIsZooming 		= false;

	m_AU					= 1.5 * Math.pow(10,11);		//CANDIDATE for _global
	m_nDisplayConvFactor	= 1 / (m_nZoomCurFactor*m_AU) * m_nDisplayHeight/2;
	m_nDisplayOffsetX		= 0;
	m_nDisplayOffsetY		= 0;
	
	m_nCurrObjectsDisplayed = 0;
	m_nCurrColsDisplayed 	= 0;	
}
_sysViewer£ÿÿÿHâÿÿ
¿ÿ£ÿÿÿHâÿÿÿÿÿÿ~ÿ£onClipEvent (load)
{
	_root.logMessage("...Loading System Controller", _root._logMgr._eLoadOrder,
									_root._logMgr._eInitialization);

	_root.logMessage (".....System Model:        " + _parent._sysModel,_root._logMgr._eInitialization);
	_root.logMessage (".....Settings Data:       " + _parent._settingsData ,_root._logMgr._eInitialization);
	_root.logMessage (".....Settings Controller: " + _parent._settingsMgr ,_root._logMgr._eInitialization);


	_root.logMessage("...Generating Initial System", _root._logMgr._eMenuControls);
	_root.logMessage(".......No History Event needed", _root._logMgr._eMenuControls);

	_parent._settingsMgr.generateNewModelData (_parent._sysModel);
	_parent._sysViewer.initializeDisplay (_parent._sysModel); 
	_parent._sysModel.createBackup(); 

	m_bIsPaused 	= true;	
	m_bIsZooming	= false;
	m_bPrevPaused   = m_bIsPaused;			// Used for restore Pause state after such things as Zooming
		
	SYSTEM_STATE_PAUSED			= 0;
	SYSTEM_STATE_MOVING			= 1;
	SYSTEM_STATE_ZOOMING		= 2;
	m_nCurrState				= SYSTEM_STATE_PAUSED;
	m_nPrevState 				= m_nCurrState;
	
	this._visible = false;
}


/*
onClipEvent (enterFrame)
{
	if ( m_bIsPaused )
	{
		// If Viewer is zooming, trigger step of Zoom		

	}else
	{
	
		l_startTime = new Date();		
		//System in motion
		//  Model the next time step
		_parent._sysModel.stepMotion();

		//  Update the display
		_parent._sysViewer.updateLocations (_parent._sysModel);
		

		currTime = new Date();
		elapsedTimeInMillis = currTime.getTime() - l_startTime.getTime();
		//fps = Math.round (1 / ( elapsedTimeInMillis / 1000 ) );
		//_parent._parent._fpsDisplay = "" + fps + " fps"
		_parent._fpsDisplay = "ms:" + elapsedTimeInMillis ;
	}

}*/_sysMgrƒÉ
ƒÉÿÿÿÿÉ#ªonClipEvent ( load )
{	
	_root.logMessage("...Loading Settings Menu", _root._logMgr._eLoadOrder);
	_label.text = "";
	_label.selectable = false;
	this._visible = false;
}_settingsMenuıùÿÿºßÿÿ
ıùÿÿºßÿÿdÿ3tx_labelÿÿCPicText	Síÿÿä
’hArialÿÿÿÿ"(_fpsDisplay_fpsDisplayÿÿÿ?ÿÿ0
	baseLayerÿÿÿÿOÿÿÿÿÿ?ÿÿ+ÿÑfunction generateNewSystem(){
	_root.logMessage("...Generate New System Requested", _root._logMgr._eMenuControls);
	_sysMgr.generateNewSystem();
}

function restoreSystem(){
	_root.logMessage("...Restore System Requested", _root._logMgr._eMenuControls);
	_sysMgr.restoreSystem();
}

function playSystem(){
	_root.logMessage("...Set in Motion Requested", _root._logMgr._eMenuControls);
	_sysMgr.playSystem();
}

function stopSystem(){ 
	_root.logMessage("...Stop System Requested", _root._logMgr._eMenuControls);
	_sysMgr.stopSystem();
}

function dumpSystem(){
	_root.logMessage("...Dump System Requested", _root._logMgr._eMenuControls);
	_sysMgr.dumpSystem();
}

function zoomInSystem(){
	_root.logMessage("...Zoom In System Requested", _root._logMgr._eMenuControls);
	_sysMgr.zoomInSystem();
}

function zoomOutSystem(){
	_root.logMessage("...Zoom out System Requested", _root._logMgr._eMenuControls);
	_sysMgr.zoomOutSystem();
}

function displaySettings(){
	_root.logMessage("...Show Settings Menu Requested", _root._logMgr._eMenuControls);
	_fpsDisplay = "";
	_sysMgr.stopSystem();
	_settingsMgr.displaySettings();	
}

function setAction ( p_action ){
	trace ("Deprecated function called.   setAction() in SystemEnvironment");
}
menuControlsÿÿÿÿÿÿÿÿ?ÿÿÇSfunction updateGoPauseButton()
{	
//	_parent._playStopButton.setPausedIcon(true);
}
controlMenuÿÿÿÿOÿÿÿÿÿÿ?ÿÿô¹function handleCollision( p_nObjIndexA, p_nObjIndexB)
{

	// Create History Event
	
	// Model the collision

	// Update the viewer
	
	// Communicate the update to the user

}
handleCollisionÿÿÿÿ™3ÌÿpeF ÌÿdsPÉCÁTUÿÿCPicText	ëÿÓêÿÿ@ÿÿÿñf@ArialÌÿ"(SystemEnvironmentÿÿÿ?ÿÿ*f
Layer 1ÿÿÿÿOÿÿÿÿÿÿ	CPicShapeF ÌÿdsPÉCÁTUÿÿCPicText	ëÿÓêÿÿ@ÿÿÿñf@ArialÌÿ"(SystemEnvironmentÿÿÿ?ÿÿ$
Layer 1ÿÿÿÿOÿÿÿÿ
ÿÿÿÿóD&ıv³<ÆşæıŞ4‘p"ÿ<:Ş4ppà0ŠL<: ÿ4p‘àèı<Æş ÿæı4‘‘èı"ÿÿÿÿ?ÿÿl=
Layer 1ÿÿÿÿOÿÿÿÿÿÿÿÿsœèıÈø4”ş˜4´Lhÿp4l˜p4LLp˜084lphÿ4L´˜şğ4”hÿşÿÿÿ	şÿÿÿşÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿş4´´şhÿÿÿÿ?ÿÿ»A
Layer 1ÿÿÿÿOÿÿÿÿÿÿ	CPicShape\ÆÿÿÿÿÿÿÿW)şÿ</Å//r<«AÑp+Ñ¼/0E¾¼ÿĞ4Ñ«ÑÑ4Å½/E/´ÑqÒ+B´ÿq.ÿÿÿ?ÿÿõ
Layer 1ÿÿÿÿOÿÿÿÿÿÿ	CPicShapeaëÿÿ„şÿÿ
ÿÿÿÿ(s„Ot³8ÿbÿÿæıŞ4şp"ÿ8şÿÿÿŞ4ÿopà0ŒL<: ÿ4p‘àèı8cÿÿ ÿæı4‘‘èı"ÿÿÿÿ?ÿÿxT
Layer 1ÿÿÿÿOÿÿÿÿÿÿ
CPicSpriteXä#
Xä#ÿÿÿÿ¾_menuÔb%
Ôb%dÿ._btnMenuHideShow(Dïÿÿ
(Dïÿÿÿÿÿÿ0ENÿonClipEvent (load)
{
	trace("...Loading Log Manager");
	this._visible			= false;
	m_bWarnOnFilteredMsg 	= false;


	// ENUMERATE THE LOGGING AREAS
	_eMinArea			= 1;		// USED FOR VALIDATING SPECIFIED LOGGING AREAS
	
	_eMenuControls 		= 1;
	_eLoadOrder	 		= 2;
	_eInitialization	= 3; 
	_eSystemGeneration	= 4;
	_eCollisionEvent	= 5;
	_eCoreFunctions		= 6;
	_eViewer			= 7;
	_eLayout			= 8; 
	_eZooming			= 9;
	
	_eMaxArea			= 9;		// USED FOR VALIDATING SPECIFIED LOGGING AREAS
			
			
	// Logging of particular areas can be disabled by commenting out 
	//   the line that adds the area to the list of enabled areas. 
	enabledFuncAreas = new Array();
	enabledFuncAreas.push(_eMenuControls);	
	//enabledFuncAreas.push(_eLoadOrder);	
	//enabledFuncAreas.push(_eInitialization); 	
	//enabledFuncAreas.push(_eSystemGeneration); 	
	enabledFuncAreas.push(_eCollisionEvent); 		
	enabledFuncAreas.push(_eCoreFunctions); 		
	enabledFuncAreas.push(_eViewer); 		
	enabledFuncAreas.push(_eLayout); 		
	//enabledFuncAreas.push(_eZooming);  
}


_logMgrùñÿÿ
ùñÿÿÿÿÿÿ1&øonClipEvent (load)
{
	_root.logMessage("...Loading Environment Manager", _root._logMgr._eLoadOrder, _root._logMgr._eInitialization);
	this._visible			= false;

	_envList = new Array();
	_envList.push( "_sysEnv00" );
	_currEnv = _parent._sysEnv00;
}_envMgr_‚
_‚ÿÿÿÿ
ÌonClipEvent ( load )
{	
	_root.logMessage("...Loading System Environment", _root._logMgr._eLoadOrder);
	this._label._visible = false;
	
	this._fpsDisplay.text = "";
	this._fpsDisplay.selectable = false;
}	_sysEnv00ÿÿÿ?ÿÿ#HÿT_global.setObjectColor = function(movie,R,G,B){
	//set the color of the movie clip
	//trace("Setting color:"+R+", "+G+", "+B + "...MovieName: "+movie._name) ;
	newColor = new Color(movie);
	colorTransform = new Object;

	colorTransform.ra = R/255.0*100;
	colorTransform.ga = G/255.0*100;
	colorTransform.ba = B/255.0*100;

	newColor.setTransform(colorTransform);
}

function layout()
{
	_root.logMessage("\nStage Resized... should layout UI", _root._logMgr._eLayout);
}

Stage.scaleMode = "noScale"; 
Stage.onResize = layout();


hideObjects = function ()
{
	trace( "wrong objects hidden....");
}
UtilityFunctionsÿÿÿÿOÿÿÿÿÿ?ÿÿŸZÿŸtrace ("\n\n********************* System Started *********************");


_global.logMsg = function(p_message, p_funcArea,  p_AltFuncArea1, p_AltFuncArea2)
{
	_root.logMessage(p_message, p_funcArea, p_AltFuncArea1, p_AltFuncArea2);	
}
	


function logMessage (p_message, p_funcArea,  p_AltFuncArea1, p_AltFuncArea2)
{
	//trace("Mesage from area: " + p_funcArea);
	_logMgr.logMessage (p_message, p_funcArea, p_AltFuncArea1, p_AltFuncArea2);

	//trace ("Area1 : " + p_funcArea + ", AltArea1: " + p_AltFuncArea1+ ", Alt2: " + p_AltFuncArea2);
    //trace ("Message...\n" + p_message);
}

function traceMessage(p_message)
{
	trace("Basic Message...");
	trace (p_message);
}

logMessageÿÿÿÿÿOOÿÿÿÿ?ÿÿÔLÿ's_nOrigWidth = Stage.width;
s_nOrigHeight = Stage.height;
_layoutMgr = new LayoutMgr(s_nOrigWidth, s_nOrigHeight);

function LayoutMgr(p_nWidth, p_nHeight)
{
	m_nOrigWidth = p_nWidth;
	m_nOrigHeight = p_nHeight;
	
	m_nAdjOriginX = 0;
	m_nAdjOriginY = 0;	
}

LayoutMgr.prototype.onResize = function()
{
	//trace ("LayoutMgr :: Stage Resized to: " + Stage.width + " x " + Stage.height);
	
	nDiffWidth		= Stage.width - m_nOrigWidth;
	nDiffHeight		= Stage.height - m_nOrigHeight;
	//trace (" ...Width diff: " + nDiffWidth);
	//trace (" ...Height diff: " + nDiffHeight);
	
	
	
	m_nAdjOriginX = 0 ;//- nDiffWidth/2;
	m_nAdjOriginY = 0 ;//- nDiffHeight/2;

	//trace (" ......Adj Orig X : " + m_nAdjOriginX);
	//trace (" ......Adj Orig Y : " + m_nAdjOriginY);
	
	
	nMenuWidth = 528; // _menu.width/2;
	nMenuHeight = 38; // _menu.height;
	
	_menu._x = Math.round( m_nAdjOriginX + Stage.width /2 - nMenuWidth/2); 
	_menu._y = Math.round(m_nAdjOriginY + Stage.height - nMenuHeight - 10); 
		
	_btnMenuHideShow._x = Math.round(_menu._x + nMenuHeight /2);
	_btnMenuHideShow._y = Math.round(_menu._y + nMenuHeight /2);
	
	xCurEnv = _envMgr.getCurrentEnv();
	xCurEnv._x = Math.round( m_nAdjOriginX + Stage.width /2); 
	xCurEnv._y = Math.round( m_nAdjOriginY + Stage.height /2); 
	
	xCurEnv._fpsDisplay._x  = Math.round (m_nAdjOriginX + 500);
	//xCurEnv._fpsDisplay._y  = Math.round (m_nAdjOriginY + 20);
	
	
}

Stage.scaleMode = "noScale"; 		// Does not scale the movie 
Stage.align = "TL";				// align = "TL" causes the 0,0 to be in the upper left corner.
Stage.addListener ( _layoutMgr );
layoutÿÿÿÿOÿOÿ	
şÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿ)ÿÿCDocumentPagePage 1Scene 1¾ò4B³ÿÿÿÿJ~aBÿÿÿÿ	Symbol 56
MenuBorder8v?aB	Symbol 56ÿÿÿÿv?aBÿÿÿÿ	Symbol 55MenuHideShowBackground7¬¶OBŠ	Symbol 55ÿÿÿÿ¬¶OBÿÿÿÿ	Symbol 54ButtonBackground6³OBˆ	Symbol 54ÿÿÿÿÙ³OBÿÿÿÿ	Symbol 53MenuBackground5,°OB	Symbol 53ÿÿÿÿ/RBÿÿÿÿ	Symbol 51SystemEnvironmentLabel3®OB|	Symbol 51ÿÿÿÿ®OBÿÿÿÿ	Symbol 50SystemEnvironment Label2F©OBz	Symbol 50ÿÿÿÿF©OBÿÿÿÿSymbol 1SystemEnvironmentsÆA/Ğ²Af
.\temp.fla"SystemComponents/SystemEnvironment†ò4BĞ²AfJ~aBÿÿÿÿSymbol 2HistoryDatasÆA/ïıB
.\temp.flaSystemComponents/HistoryDataæ`BïıBæ`BÿÿÿÿSymbol 3HistoryManagersÆA/Â™BE
.\temp.flaSystemComponents/HistoryManagerñ`BÂ™BEñ`BÿÿÿÿSymbol 4HistoryViewersÆA/şB¡
.\temp.flaSystemComponents/HistoryVieweraBşB¡O­OBÿÿÿÿSymbol 5SystemSettingssÆA/)ÒÇAF
.\temp.flaSystemComponents/SystemSettings&aB)ÒÇAF‘waBÿÿÿÿSymbol 6SettingsControllerşBŸ
.\temp.flaSettingsController.Ö/BşBŸ9waBÿÿÿÿSymbol 7SystemModelsÆA//ãBV
.\temp.flaSystemComponents/SystemModel,z4B/ãBVØxaBÿÿÿÿSymbol 8SystemViewersÆA/@ãBX
.\temp.flaSystemComponents/SystemViewerf»4B@ãBXraBÿÿÿÿSymbol 9Ball	ÛuÆA0“ã‘;ObjectTemplate
.\temp.flaTemplates/Ball÷}ÆA“ã‘;ö5RBÿÿÿÿ	Symbol 10internalButton
ª^¡<8³è<
.\temp.flaButtons/internalButtonDÄÇA³è<´OBÿÿÿÿ	Symbol 11Explosion01ÛuÆA0ëò<+
.\temp.flaTemplates/Explosion01_°²Aëò<+_°²Aÿÿÿÿ	Symbol 12Explosion02ÛuÆA0íò<-
.\temp.flaTemplates/Explosion02íò<íò<-íò<ÿÿÿÿ	Symbol 13StageCurtain&JBS
.\temp.flaStageCurtain&JB&JBS&JBÿÿÿÿ	Symbol 14Eraser¸ÒBJ
.\temp.flaEraser¸ÒB¸ÒBJ¸ÒBÿÿÿÿ	Symbol 15SystemControllersÆA/+äBY
.\temp.fla!SystemComponents/SystemControlleräPB+äBY0raBÿÿÿÿ	Symbol 16SystemSettingsMenusÆA/æ²Ah
.\temp.fla#SystemComponents/SystemSettingsMenuiÔ/Bæ²Ah2}aBÿÿÿÿ	Symbol 17
BackgroundĞvÆA1M¡<
.\temp.flaUI_Templates/BackgroundüBM¡<ñ_aBÿÿÿÿ	Symbol 18BorderĞvÆA1R;¢<
.\temp.flaUI_Templates/BorderR;¢<R;¢<R;¢<ÿÿÿÿ	Symbol 19TypeIcon_HighlightôÊÇA;ìÇÇAG
.\temp.flaTypeIcons/TypeIcon_HighlightiÔ/BìÇÇAGiÔ/Bÿÿÿÿ	Symbol 20TypeIcon_HighlightBasegÍÇAD
.\temp.flaTypeIcon_HighlightBaseiÔ/BgÍÇADiÔ/Bÿÿÿÿ	Symbol 21TypeIcon_BinaryôÊÇA;‡¾ÇA;
.\temp.flaTypeIcons/TypeIcon_BinaryÂôÇA‡¾ÇA;||aBÿÿÿÿ	Symbol 22TypeIconBackgroundôÊÇA;J¼ÇA6
.\temp.flaTypeIcons/TypeIconBackgroundµÇÇAJ¼ÇA6µÇÇAÿÿÿÿ	Symbol 23TypeIcon_GridôÊÇA;•ÀÇA=
.\temp.flaTypeIcons/TypeIcon_GridÕôÇA•ÀÇA=ôfaBÿÿÿÿ	Symbol 24TypeIcon_RingsôÊÇA;	ÁÇA?
.\temp.flaTypeIcons/TypeIcon_RingsÜôÇA	ÁÇA?úfaBÿÿÿÿ	Symbol 25TypeIcon_SpiralôÊÇA;&ÁÇAA
.\temp.flaTypeIcons/TypeIcon_SpiraláôÇA&ÁÇAAşfaBÿÿÿÿ	Symbol 26TypeIcon_SingleôÊÇA;‡ÁÇAC
.\temp.flaTypeIcons/TypeIcon_SingleôÇA‡ÁÇACšxaBÿÿÿÿ	Symbol 27TypeIcon_CustomôÊÇA;ÓÁÇAE
.\temp.flaTypeIcons/TypeIcon_CustomÃÉÇAÓÁÇAEgaBÿÿÿÿ	Symbol 28SystemMenuOKsÆA/Óº»A*
.\temp.flaSystemComponents/SystemMenuOKÇRBÓº»A*FvaBÿÿÿÿ	Symbol 29SystemMenuCancelsÆA/­»»A,
.\temp.fla!SystemComponents/SystemMenuCancel²¾»A­»»A,vaBÿÿÿÿ	Symbol 30MenuwÆA2™M¡<
.\temp.flaMenuComponents/MenuŸØ/B™M¡<taBÿÿÿÿ	Symbol 31Nextª^¡<8ò6="
.\temp.flaButtons/Next™LBò6="´OBÿÿÿÿ	Symbol 32settingButton wÆA2Je±A!
.\temp.flaMenuComponents/settingButtonŸØ/BJe±A!taBÿÿÿÿ	Symbol 33refreshButton!ª^¡<8w¡<>
.\temp.flaButtons/refreshButton8Bw¡<>´OBÿÿÿÿ	Symbol 34PlayStopButton": ³AM
.\temp.flaPlayStopButtonãzB: ³AM´OBÿÿÿÿ	Symbol 35StopIcon#ª^¡<8s ³AO
.\temp.flaButtons/StopIconÄÁAs ³AOÄÁAÿÿÿÿ	Symbol 36GoIcon$ª^¡<8k ³AN
.\temp.flaButtons/GoIcon‰ÁAk ³ANî°OBÿÿÿÿ	Symbol 37DebugButton%wÆA2Ñ»·A0
.\temp.flaMenuComponents/DebugButtonP¼·AÑ»·A0p1RBÿÿÿÿ	Symbol 38ZoomOutButton&ª^¡<8¶¸A@
.\temp.flaButtons/ZoomOutButton39B¶¸A@´OBÿÿÿÿ	Symbol 39MagGlass'¿¸A6«¸A3
.\temp.flaButtons/bZoomIcons/MagGlassæçA«¸A3Á²OBÿÿÿÿ	Symbol 40	MinusSign(¿¸A6¸A5
.\temp.flaButtons/bZoomIcons/MinusSign­¸A¸A5­¸Aÿÿÿÿ	Symbol 41ZoomInButton)ª^¡<8Ø½A-
.\temp.flaButtons/ZoomInButtonÿåçAØ½A-´OBÿÿÿÿ	Symbol 42PlusSign*¿¸A6G¹A,
.\temp.flaButtons/bZoomIcons/PlusSignG¹AG¹A,G¹Aÿÿÿÿ	Symbol 43DeleteX+ª^¡<8Ÿ½A/
.\temp.flaButtons/DeleteXSBŸ½A/´OBÿÿÿÿ	Symbol 44
ZoomSlider,ª^¡<8ÛAÂA[
.\temp.flaButtons/ZoomSliderİµÇAÛAÂA[´OBÿÿÿÿ	Symbol 45ZoomSliderNob-ª^¡<8EBÂA]
.\temp.flaButtons/ZoomSliderNobvxÆAEBÂA]vxÆAÿÿÿÿ	Symbol 46HideShowButtonWrapper.^¡<6Ùc¡<:
.\temp.fla,Buttons/HideShowButton/HideShowButtonWrapperƒZBÙc¡<:Ç¶OBÿÿÿÿ	Symbol 47MenuHideShow/^¡<6Í]¡<1
.\temp.fla#Buttons/HideShowButton/MenuHideShowvÆAÍ]¡<1vÆAÿÿÿÿ	Symbol 48
LogManager0sÆA/A«³AS
.\temp.flaSystemComponents/LogManagerTBA«³AS%ïYBÿÿÿÿ	Symbol 49EnvironmentManager1sÆA/&¥³AQ
.\temp.fla#SystemComponents/EnvironmentManagerV9B&¥³AQ÷»OBÿÿÿÿ9°6'hhhhhfffÿÀÀÀÿ´ÿÿÿÿüÿÿ	CColorDefÿ:ÿ:ÿ:3ÿPï:fÿPï0:™ÿPïH:ÌÿPï`:ÿÿPïx:3ÿï:33ÿ(ï:3fÿ<ï0:3™ÿCïH:3ÌÿFï`:3ÿÿHïx:fÿï0:f3ÿï0:ffÿ(ï0:f™ÿ5ïH:fÌÿ<ï`:fÿÿ@ïx:ÿ:333ÿ0:ÿ:3ÿ ï:33ÿxï:f3ÿdï0:™3ÿ]ïH:Ì3ÿZï`:ÿ3ÿXïx:33ÿÈï:333ÿ0:3f3ÿPPH:3™3ÿPx`:3Ì3ÿPx:3ÿ3ÿPï:f3ÿÜï0:f33ÿPH:ff3ÿ(PH:f™3ÿ<x`:fÌ3ÿCx:fÿ3ÿFï:ÿ:fffÿ`:ÿ:fÿ ï0:3fÿŒï0:ffÿxï0:™fÿkïH:Ìfÿdï`:ÿfÿ`ïx:3fÿ´ï0:33fÿ PH:3ffÿxPH:3™fÿdx`:3Ìfÿ]x:3ÿfÿZï:ffÿÈï0:f3fÿÈPH:fffÿ`:f™fÿP0x:fÌfÿPx:fÿfÿPï¨:ÿ:™™™ÿ:ÿ:™ÿ ïH:3™ÿ“ïH:f™ÿ…ïH:™™ÿxïH:Ì™ÿnï`:ÿ™ÿhïx:3™ÿ­ïH:33™ÿ x`:3f™ÿŒx`:3™™ÿxx`:3Ì™ÿkx:3ÿ™ÿdï:f™ÿ»ïH:f3™ÿ´x`:ff™ÿ 0x:f™™ÿx0x:fÌ™ÿdx:fÿ™ÿ]ï¨:ÿ:ÌÌÌÿÀ:ÿ:Ìÿ ï`:3Ìÿ–ï`:fÌÿŒï`:™Ìÿ‚ï`:ÌÌÿxï`:ÿÌÿpïx:3Ìÿªï`:33Ìÿ x:3fÌÿ“x:3™Ìÿ…x:3ÌÌÿxx:3ÿÌÿnï:fÌÿ´ï`:f3Ìÿ­x:ffÌÿ x:f™ÌÿŒx:fÌÌÿxx:fÿÌÿkï¨:ÿ:ÿÿÿÿğ:ÿ:ÿÿ ïx:3ÿÿ˜ïx:fÿÿïx:™ÿÿˆïx:Ìÿÿïx:ÿÿÿxïx:3ÿÿ¨ïx:33ÿÿ ï:3fÿÿ–ï:3™ÿÿŒï:3Ìÿÿ‚ï:3ÿÿÿxï:fÿÿ°ïx:f3ÿÿªï:ffÿÿ ï¨:f™ÿÿ“ï¨:fÌÿÿ…ï¨:fÿÿÿxï¨:ÿ:ÿÿïx:ÿ:™ÿïH:™3ÿïH:™fÿïH:™™ÿ(ïH:™Ìÿ2ï`:™ÿÿ8ïx:Ìÿï`:Ì3ÿ
ï`:Ìfÿï`:Ì™ÿï`:ÌÌÿ(ï`:Ìÿÿ0ïx:ÿÿïx:ÿ3ÿïx:ÿfÿïx:ÿ™ÿïx:ÿÌÿ ïx:ÿÿÿ(ïx:ÿ:ÿÿPïx:ÿ:™3ÿãïH:™33ÿx`:™f3ÿx`:™™3ÿ(x`:™Ì3ÿ5x:™ÿ3ÿ<ï:Ì3ÿæï`:Ì33ÿx:Ìf3ÿx:Ì™3ÿx:ÌÌ3ÿ(x:Ìÿ3ÿ2ï:ÿ3ÿèïx:ÿ33ÿï:ÿf3ÿ
ï:ÿ™3ÿï:ÿÌ3ÿï:ÿÿ3ÿ(ï:ÿ:ÿÿ ïx:ÿ:™fÿÕïH:™3fÿÜx`:™ffÿ0x:™™fÿ(0x:™Ìfÿ<x:™ÿfÿCï¨:ÌfÿÜï`:Ì3fÿãx:Ìffÿx:Ì™fÿx:ÌÌfÿ(x:Ìÿfÿ5ï¨:ÿfÿàïx:ÿ3fÿæï:ÿffÿï¨:ÿ™fÿï¨:ÿÌfÿï¨:ÿÿfÿ(ï¨:ÿ:ÿÿÿ(ïx:ÿ:™™ÿÈïH:™3™ÿÈx`:™f™ÿÈ0x:™™™ÿ:™Ì™ÿPP¨:™ÿ™ÿPïÀ:Ì™ÿÒï`:Ì3™ÿÕx:Ìf™ÿÜx:Ì™™ÿP¨:ÌÌ™ÿ(P¨:Ìÿ™ÿ<ïÀ:ÿ™ÿØïx:ÿ3™ÿÜï:ÿf™ÿãï¨:ÿ™™ÿïÀ:ÿÌ™ÿïÀ:ÿÿ™ÿ(ïÀ:ÿ:ÿÿÿxïx:ÿ:™Ìÿ¾ï`:™3Ìÿ»x:™fÌÿ´x:™™Ìÿ P¨:™ÌÌÿxP¨:™ÿÌÿdïÀ:ÌÌÿÈï`:Ì3ÌÿÈx:ÌfÌÿÈx:Ì™ÌÿÈP¨:ÌÌÌÿÀ:ÌÿÌÿPïØ:ÿÌÿĞïx:ÿ3ÌÿÒï:ÿfÌÿÕï¨:ÿ™ÌÿÜïÀ:ÿÌÌÿïØ:ÿÿÌÿ(ïØ:ÿ:ÿÿÿÈïx:ÿ:™ÿÿ¸ïx:™3ÿÿ´ï:™fÿÿ­ï¨:™™ÿÿ ïÀ:™ÌÿÿŒïÀ:™ÿÿÿxïÀ:ÌÿÿÀïx:Ì3ÿÿ¾ï:Ìfÿÿ»ï¨:Ì™ÿÿ´ïÀ:ÌÌÿÿ ïØ:ÌÿÿÿxïØ:ÿÿÿÈïx:ÿ3ÿÿÈï:ÿfÿÿÈï¨:ÿ™ÿÿÈïÀ:ÿÌÿÿÈïØ:ÿÿÿÿğ:ÿ:ÿÿÿÿÿÿÿ:ÿÿÿÿÿÿÿ:ÿÿÿÿÿ:ÿÿÿÿÿ:ÿÿÿÿÿ:ÿfıÿ`ÿÿÿÿzÿÿÿÿ™fÿªÿÌÿÿÿÿÿÿ:ÿÿÿ*ÿÿÿ]ÿÿÿÿÿªÿÿÔÿÿÿÿÿÿøüSystemComponentssÆA/ÿÿÿÿ	TemplatesÛuÆA0ÿÿÿÿButtonsª^¡<8ÿÿÿÿUI_TemplatesĞvÆA1ÿÿÿÿ	TypeIconsôÊÇA;ÿÿÿÿMenuComponentswÆA2ÿÿÿÿ
bZoomIconsª^¡<8¿¸A6ÿÿÿÿHideShowButtonª^¡<8^¡<6ÿÿÿÿÿÿh